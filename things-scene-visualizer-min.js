!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._model=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Object3D),r(t,[{key:"dispose",value:function(){var e=this;this.children.slice().forEach(function(t){t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&t.material.dispose&&t.material.dispose(),t.texture&&t.texture.dispose&&t.texture.dispose(),e.remove(t)})}},{key:"createObject",value:function(e){}},{key:"model",get:function(){return this._model}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={},i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"register",value:function(e,t){if(!t)return o[e];o[e]=t}}]),e}();t.default=i,scene.Component3d=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(19)),a=s(n(18));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._visualizer=r,o._canvasSize=n,o.createObject(n),o.setPosition(),o.setRotation(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"createObject",value:function(){var e=this.model,t=e.fillStyle,n=void 0===t?16777215:t,r=e.strokeStyle,o=void 0===r?6513507:r,i=e.lineWidth,a=void 0===i?1:i,s=e.alpha,u=void 0===s?1:s,c=this.shape;if(c){var l=this.extrudeSettings,h=this.boundingUVGenerator;h&&h.setShape({extrudedShape:c,extrudedOptions:l});var f=this.createGeometry(c,l),d=this.createMaterial();if(n&&"none"!=n){var p=this.createMesh(f,d);this.add(p)}if(o&&"transparent"!=o&&a>0){var y=this.createSideMesh(f,c,l);this.add(y)}this.opacity=u}}},{key:"createGeometry",value:function(e,t){var n=new THREE.ExtrudeBufferGeometry(e,t);return n.center(),n}},{key:"createMaterial",value:function(){var e,t=this,n=this.model.fillStyle;if("pattern"==n.type&&n.image){var r=this._visualizer._textureLoader.load(this._visualizer.app.url(n.image),function(e){e.minFilter=THREE.LinearFilter,t._visualizer.render_threed()});e=[new THREE.MeshLambertMaterial({map:r,side:THREE.DoubleSide}),new THREE.MeshLambertMaterial({color:n,side:THREE.DoubleSide})]}else e=new THREE.MeshLambertMaterial({color:n});var o=(0,i.default)(n).getAlpha();return e.opacity=o,e.transparent=o<1,e}},{key:"createMesh",value:function(e,t){var n=new THREE.Mesh(e,t);return n.rotation.x=-Math.PI/2,n.rotation.y=-Math.PI,n.rotation.z=-Math.PI,n}},{key:"createSideMesh",value:function(e,t){var n=this.model,r=n.strokeStyle,o=void 0===r?0:r,a=n.depth,s=void 0===a?0:a,u=n.lineWidth,c=void 0===u?0:u,l=new THREE.Path;l.setFromPoints(t.getPoints());var h=new THREE.MeshLambertMaterial({color:o}),f=(0,i.default)(o).getAlpha();h.opacity=f,h.transparent=f<1,h.polygonOffset=!0,h.polygonOffsetFactor=-.1,(t=this.sideShape||t).holes.push(l);var d={steps:1,amount:s,bevelEnabled:!0,bevelThickness:0,bevelSize:c,bevelSizeSegments:5},p=new THREE.ExtrudeBufferGeometry(t,d);p.center();var y=new THREE.Mesh(p,h);return y.rotation.x=-Math.PI/2,y.rotation.y=-Math.PI,y.rotation.z=-Math.PI,y}},{key:"setPosition",value:function(){this.position.set(this.cx,this.cz,this.cy)}},{key:"setRotation",value:function(){var e=this.model,t=e.rotationX,n=void 0===t?0:t,r=e.rotation,o=void 0===r?0:r,i=e.rotationZ,a=void 0===i?0:i;this.rotation.x=-n,this.rotation.y=-o,this.rotation.z=-a}},{key:"raycast",value:function(e,t){}},{key:"cx",get:function(){if(!this._cx){var e=this.model,t=e.left,n=void 0===t?0:t,r=e.width,o=void 0===r?0:r,i=this._canvasSize;this._cx=n+o/2-i.width/2}return this._cx}},{key:"cy",get:function(){if(!this._cy){var e=this.model,t=e.top,n=void 0===t?0:t,r=e.height,o=void 0===r?0:r,i=this._canvasSize;this._cy=n+o/2-i.height/2}return this._cy}},{key:"cz",get:function(){if(!this._cz){var e=this.model,t=e.zPos,n=void 0===t?0:t,r=e.depth,o=void 0===r?1:r;this._cz=n+o/2}return this._cz}},{key:"shape",get:function(){return null}},{key:"sideShape",get:function(){return null}},{key:"extrudeSettings",get:function(){var e=this.model.depth;return{steps:1,amount:void 0===e?1:e,bevelEnabled:!1,UVGenerator:this.boundingUVGenerator}}},{key:"boundingUVGenerator",get:function(){return this._boundingUVGenerator||(this._boundingUVGenerator=new a.default),this._boundingUVGenerator}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._model=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Mesh),r(t,[{key:"dispose",value:function(){var e=this;this.children.slice().forEach(function(t){t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&t.material.dispose&&t.material.dispose(),t.texture&&t.texture.dispose&&t.texture.dispose(),e.remove(t)})}},{key:"model",get:function(){return this._model}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=(r=n(3))&&r.__esModule?r:{default:r},s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._visualizer=n,r._hideEmptyStock=n&&n.model.hideEmptyStock,r.createObject(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"dispose",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),delete this._visualizer}},{key:"getMaterial",value:function(e){if(!this.stockMaterials[e]){if(!(this._visualizer&&this._visualizer&&this._visualizer.legendTarget&&this._visualizer.legendTarget.get("status")))return this.userDefineDefaultMaterial;var t=this._visualizer.legendTarget.get("status").ranges[e];t&&t.color||(this.stockMaterials[e]=this.userDefineDefaultMaterial),this.stockMaterials[e]=new THREE.MeshLambertMaterial({color:t.color,side:THREE.FrontSide})}return this.stockMaterials[e]}},{key:"createObject",value:function(){var e=this.model,t=e.width,n=e.height,r=e.depth;this.createStock(t,n,r)}},{key:"createStock",value:function(e,n,r){this.geometry=t.stockGeometry,this.material=this._hideEmptyStock?this.emptyMaterial:this.userDefineDefaultMaterial,this.type="stock",this.scale.set(e,r,n)}},{key:"onUserDataChanged",value:function(){var e=this;if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onUserDataChanged",this).call(this),this._visualizer&&this._visualizer&&this._visualizer.legendTarget&&this._visualizer.legendTarget.get("status")){var n=this._visualizer.legendTarget.get("status"),r=n.field,o=n.ranges;if(r&&o){var a=this.userData.items?this.userData.items:[this.userData];for(var s in a){var u=a[s][r];if(void 0==u)return void(this.material=this._hideEmptyStock?this.emptyMaterial:this.userDefineDefaultMaterial);o.some(function(t,n){var r=t.min,o=t.max;if(r=Number(r)||r,(o=Number(o)||o)>u)return void 0!==r?r<=u&&(e.material=e.getMaterial(n)):e.material=e.getMaterial(n),!0;e.material=e._hideEmptyStock?e.emptyMaterial:e.userDefineDefaultMaterial})}}}}},{key:"onBeforeRender",value:function(){if(this._focused){var e=(performance.now()-this._focusedAt)/2e3;this.rotation.y=2*Math.PI*e,this._visualizer.invalidate()}else this._focusedAt&&(delete this._focusedAt,this.rotation.y=0,this._visualizer.invalidate())}},{key:"onmouseup",value:function(e,t,n){if(this.visible&&(this.userData&&0!==Object.keys(this.userData).length||(this.userData={loc:this.name}),n&&"function"==typeof n)){var r=Object.assign({color:"#"+this.material.color.getHexString()},this.userData);n.call(this,{data:r,location:"right-top"})}}},{key:"stockMaterials",get:function(){return this._visualizer._stock_materials||(this._visualizer._stock_materials=[]),this._visualizer._stock_materials}},{key:"userDefineDefaultMaterial",get:function(){if(!this._visualizer._default_material){if(!(this._visualizer&&this._visualizer&&this._visualizer.legendTarget&&this._visualizer.legendTarget.get("status")))return t.defaultMaterial;var e=this._visualizer.legendTarget.get("status").defaultColor;if(!e)return t.defaultMaterial;this._visualizer._default_material=new THREE.MeshLambertMaterial({color:e,side:THREE.FrontSide})}return this._visualizer._default_material}},{key:"emptyMaterial",get:function(){var e="#ccaa76";return this._visualizer._empty_material||(this._visualizer&&this._visualizer&&this._visualizer.legendTarget&&this._visualizer.legendTarget.get("status")&&(e=this._visualizer.legendTarget.get("status").defaultColor||"#ccaa76"),this._visualizer._empty_material=new THREE.MeshBasicMaterial({color:e}),this._visualizer._empty_material.opacity=.33,this._visualizer._empty_material.transparent=!0),this._visualizer._empty_material}}],[{key:"stockGeometry",get:function(){return t._geometry||(t._geometry=new THREE.BoxBufferGeometry(1,1,1)),t._geometry}},{key:"defaultMaterial",get:function(){return t._material_default||(t._material_default=new THREE.MeshLambertMaterial({color:"#ccaa76",side:THREE.FrontSide})),t._material_default}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._visualizer=r,o._frames=[],o._boards=[],o.createObject(n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"dispose",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),delete this._visualizer}},{key:"createObject",value:function(e){var t=this.model,n=t.type,r=t.left,o=t.top,a=t.width,s=t.height,u=t.depth,c=t.rotation,l=void 0===c?0:c,h=t.fillStyle,f=t.hideRackFrame,d=t.shelves,p=t.shelfPattern,y=t.stockScale,m=void 0===y?.7:y,b=r+a/2-e.width/2,v=o+s/2-e.height/2,g=.5*u*d;if(this.type=n,!f){var _=this.createRackFrame(a,s,u*d);this.add(_)}for(var w=0;w<d;w++){var E=-u*d*.5;if(w>0&&!f){var k=this.createRackBoard(a,s);k.position.set(0,E+u*w,0),k.rotation.x=Math.PI/2,k.material.opacity=.5,k.material.transparent=!0,this.add(k)}var O=new i.default({width:a*m,height:s*m,depth:u*m,fillStyle:h},this._visualizer),T=u*m;O.position.set(0,E+u*w+.5*T,0),O.name=this.makeLocationString(this.makeShelfString(p,w+1,d)),this.add(O),this._visualizer.putObject(O.name,O)}this.position.set(b,g,v),this.rotation.y=-l}},{key:"createRackFrame",value:function(e,n,r){for(var o=Math.round(Math.min(e,n)/10),i=new THREE.Group,a=0;a<4;a++){var s=t.rackFrameGeometry,u=t.frameMaterial,c=new THREE.Mesh(s,u);switch(c.scale.set(o,r,o),a){case 0:c.position.set(e/2,0,n/2);break;case 1:c.position.set(e/2,0,-n/2);break;case 2:c.position.set(-e/2,0,n/2);break;case 3:c.position.set(-e/2,0,-n/2)}i.add(c)}return i}},{key:"createRackBoard",value:function(e,n){var r=t.boardMaterial,o=t.boardGeometry,i=new THREE.Mesh(o,r);return i.scale.set(e,n,1),i}},{key:"makeLocationString",value:function(e){var t=this._model,n=t.locPattern,r=void 0===n?"{z}{s}-{u}-{sh}":n,o=t.zone,i=void 0===o?"":o,a=t.section,s=void 0===a?"":a,u=t.unit,c=void 0===u?"":u,l=r;return(l=(l=(l=l.replace(/{z}/i,i)).replace(/{s}/i,s)).replace(/{u}/i,c)).replace(/{sh}/i,e)}},{key:"makeShelfString",value:function(e,t,n){if(e&&t&&n){var r=/^\-/.test(e),o=((e=e.replace(/#+/,"#")).match(/0/g)||[]).length||0,i=String(r?n-t+1:t);if(i.length>o&&o>0)i=i.split("").shift(i.length-o).join("");else{for(var a="",s=0;s<o-i.length;s++)a+="0";i=a+i}return i}}},{key:"raycast",value:function(e,t){}},{key:"onchange",value:function(e,t){e.hasOwnProperty("data")&&(this.data=e.data)}},{key:"frames",get:function(){return this._frames}},{key:"boards",get:function(){return this._boards}}],[{key:"rackFrameGeometry",get:function(){return t._rackFrameGeometry||(t._rackFrameGeometry=new THREE.BoxBufferGeometry(1,1,1)),t._rackFrameGeometry}},{key:"boardGeometry",get:function(){return t._boardGeometry||(t._boardGeometry=new THREE.PlaneBufferGeometry(1,1,1,1)),t._boardGeometry}},{key:"boardMaterial",get:function(){return t._boardMaterial||(t._boardMaterial=new THREE.MeshBasicMaterial({color:"#dedede",side:THREE.DoubleSide})),t._boardMaterial.polygonOffset=!0,t._boardMaterial.polygonOffsetFactor=-.1,t._boardMaterial}},{key:"frameMaterial",get:function(){return t._frameMaterial||(t._frameMaterial=new THREE.MeshLambertMaterial({color:13421772})),t._frameMaterial}}]),t}();t.default=s,scene.Component3d.register("rack",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=scene,a=i.Component,s=(i.Component3d,i.Container,i.RectPath),u=(i.Layout,i.TableCell,{mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"section",name:"section"},{type:"string",label:"unit",name:"unit"},{type:"checkbox",label:"is-empty",name:"isEmpty"},{type:"location-increase-pattern",label:"",name:""},{type:"editor-table",label:"",name:"",property:{merge:!1,split:!1}}]}),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s(a)),r(t,[{key:"_drawBorder",value:function(e,t,n,r,o,i){i&&i.strokeStyle&&i.lineWidth&&i.lineDash&&(e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),a.drawStroke(e,i,this))}},{key:"_draw",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height,a=this.model.border||{};this.model.isEmpty||this._draw_rack_cell(e),e.beginPath(),e.lineWidth=0,e.rect(n,r,o,i);var s=this.parent,u=s.components.indexOf(this),c=s.columns||1,l=s.rows||1;this._drawBorder(e,n,r,n+o,r,a.top),this._drawBorder(e,n,r+i,n,r,a.left),(u+1)%c==0&&this._drawBorder(e,n+o,r,n+o,r+i,a.right),u>=(l-1)*c&&this._drawBorder(e,n+o,r+i,n,r+i,a.bottom)}},{key:"_post_draw",value:function(e){var n=this.bounds;n.left,n.top,n.width,n.height,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_post_draw",this).call(this,e),this._focused&&this._draw_location_info(e)}},{key:"_draw_rack_cell",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height;e.save(),e.fillStyle="#efefef",e.fillRect(n,r,o,i),e.beginPath(),e.lineWidth=1,e.strokeStyle="#ccc",e.moveTo(n,r),e.lineTo(n+o,r+i),e.moveTo(n+o,r),e.lineTo(n,r+i),e.stroke(),e.closePath(),e.restore()}},{key:"_draw_location_info",value:function(e){var t=this.parent.model,n=t.locPattern,r=t.zone;n=n.substring(0,n.indexOf("{u}")+3);var o="";if(this.get("section")&&this.get("unit")&&(o=n.replace("{z}",r).replace("{s}",this.get("section")).replace("{u}",this.get("unit"))),o){var i=this.bounds,a=i.left,s=i.top;a=Math.max(a,0),s-=18,e.font="12px Arial";var u=e.measureText(o);e.fillStyle="#FF0000",e.fillRect(a,s,u.width+6,16),e.fillStyle="white",e.fillText(o,a+3,s+13)}}},{key:"onchange",value:function(e,t){(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o in n)if(e.hasOwnProperty(n[o]))return!0})(e,"isEmpty")&&(delete this.model.unit,delete this.model.section)}},{key:"onmouseenter",value:function(){this._focused=!0,this.invalidate()}},{key:"onmouseleave",value:function(){this._focused=!1,this.invalidate()}},{key:"contains",value:function(e,n){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"contains",this).call(this,e,n);return r||(this._focused=!1,this.invalidate()),r}},{key:"hasTextProperty",get:function(){return!1}},{key:"nature",get:function(){return u}},{key:"merged",set:function(e){this.set("merged",!!e),e&&this.set("text","")},get:function(){return this.get("merged")}},{key:"rowspan",set:function(e){this.set("rowspan",e)},get:function(){return this.get("rowspan")}},{key:"colspan",set:function(e){this.set("colspan",e)},get:function(){return this.get("colspan")}},{key:"border",get:function(){this.model.border}},{key:"isEmpty",get:function(){return this.get("isEmpty")}},{key:"index",get:function(){var e=this.parent,t=e.components.indexOf(this);return{row:Math.floor(t/e.columns),column:t%e.columns}}},{key:"rowIndex",get:function(){return this.index.row}},{key:"columnIndex",get:function(){return this.index.column}},{key:"leftCell",get:function(){var e=this.parent,t=(e.components.indexOf(this),this.rowIndex),n=this.columnIndex;return 0===n?null:e.components[t*e.columns+n-1]}},{key:"rightCell",get:function(){var e=this.parent,t=(e.components.indexOf(this),this.rowIndex),n=this.columnIndex;return n===e.columns?null:e.components[t*e.columns+n+1]}},{key:"aboveCell",get:function(){var e=this.parent,t=(e.components.indexOf(this),this.rowIndex),n=this.columnIndex;return 0===t?null:e.components[(t-1)*e.columns+n]}},{key:"belowCell",get:function(){var e=this.parent,t=(e.components.indexOf(this),this.rowIndex),n=this.columnIndex;return t===e.rows?null:e.components[(t+1)*e.columns+n]}},{key:"rowCells",get:function(){return this.parent.getCellsByRow(this.rowIndex)}},{key:"columnCells",get:function(){return this.parent.getCellsByColumn(this.columnIndex)}},{key:"aboveRowCells",get:function(){for(var e=this.aboveCell;;){var t=e.notEmptyRowCells;if(t.length>0)return t;e=e.aboveCell}}},{key:"lastUnit",get:function(){for(var e=this.aboveRowCells,t=e.length-1;t>0;t--){var n=e[t].get("unit");if(n)return Number(n)}return 0}},{key:"firstUnit",get:function(){for(var e=this.aboveRowCells,t=0;t<e.length;t++){var n=e[t].get("unit");if(n)return Number(n)}return 0}},{key:"notEmptyRowCells",get:function(){return this.rowCells.filter(function(e){return!e.get("isEmpty")})}},{key:"emptyRowCells",get:function(){return this.rowCells.filter(function(e){return e.get("isEmpty")})}},{key:"isAisle",get:function(){return 0===this.notEmptyRowCells.length}}]),t}();t.default=c,["border"].forEach(function(e){return a.memoize(c.prototype,e,!1)}),a.register("rack-table-cell",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(2)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"cx",get:function(){if(!this._cx){var e=this.model.cx,t=void 0===e?0:e,n=this._canvasSize;this._cx=t-n.width/2}return this._cx}},{key:"cy",get:function(){if(!this._cy){var e=this.model.cy,t=void 0===e?0:e,n=this._canvasSize;this._cy=t-n.height/2}return this._cy}},{key:"shape",get:function(){var e=this.model,t=e.cx,n=void 0===t?0:t,r=e.cy,o=void 0===r?0:r,i=e.rx,a=void 0===i?1:i,s=e.ry,u=void 0===s?1:s,c=e.startAngle,l=void 0===c?0:c,h=e.endAngle,f=void 0===h?2*Math.PI:h,d=e.anticlockwise,p=void 0!==d&&d,y=new THREE.Shape;return y.ellipse(n,o,Math.abs(a),Math.abs(u),0,l,f,p),y}}]),t}();t.default=s,i.default.register("ellipse",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(2)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"raycast",value:function(e,t){}},{key:"shape",get:function(){var e=this.model.path,t=void 0===e?[]:e,n=new THREE.Shape;n.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)n.lineTo(t[r].x,t[r].y);return n}},{key:"minMax",get:function(){var e,t,n,r;return this._minMax||(this.model.path.forEach(function(o,i){if(0==i)return e=n=o.x,void(t=r=o.y);e=Math.min(e,o.x),n=Math.max(n,o.x),t=Math.min(t,o.y),r=Math.max(r,o.y)}),this._minMax={minX:e,minY:t,maxX:n,maxY:r}),this._minMax}},{key:"cx",get:function(){if(!this._cx){var e=this.minMax,t=e.minX,n=t,r=e.maxX-t,o=this._canvasSize;this._cx=n+r/2-o.width/2}return this._cx}},{key:"cy",get:function(){if(!this._cy){var e=this.minMax,t=e.minY,n=t,r=e.maxY-t,o=this._canvasSize;this._cy=n+r/2-o.height/2}return this._cy}}]),t}();t.default=s,i.default.register("polygon",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pallet2d=void 0;var r,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=scene,h=l.RectPath,f=l.Shape,d=l.Component,p=l.Component3d,y={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"}]},m=function(e){function t(e,n,r){s(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._visualizer=r,o.createObject(n),o}return c(t,a.default),i(t,[{key:"createObject",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,s=n.depth,u=n.rotation,c=void 0===u?0:u;if(t.extObject){var l=r+i/2-e.width/2,h=o+a/2-e.height/2;r-=e.width/2,o-=e.height/2,this.type="pallet",this.add(t.extObject.clone()),this.scale.set(i,s,a),this.position.set(l,0,h),this.rotation.y=c}else setTimeout(this.createObject.bind(this,e),50)}}],[{key:"extObject",get:function(){return o||function e(){if(!e.done){e.done=!0;var t=new THREE.OBJLoader(THREE.DefaultLoadingManager);new THREE.MTLLoader(THREE.DefaultLoadingManager).load("/obj/pallet/pallet2.mtl",function(e){e.preload(),t.setMaterials(e),e.side=THREE.frontSide,t.load("/obj/pallet/pallet2.obj",function(e){o=e})})}}(),o}}]),t}();t.default=m;var b=t.Pallet2d=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,h(f)),i(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return y}}]),t}();d.register("pallet",b),p.register("pallet",m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(0))&&r.__esModule?r:{default:r},a=scene.Component3d,s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._visualizer=r,o.createObject(n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"createObject",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height,a=t.rotation,s=void 0===a?0:a,u=t.zPos,c=t.location,l=Math.min(o,i),h=n-e.width/2,f=r-e.height/2,d=(u||0)+l/2;this.type="beacon",c&&(this.name=c);for(var p=0;p<3;p++)this.createSensor(l*(1+.5*p)/2,p).material.opacity=.5-.15*p;this.position.set(h,d,f),this.rotation.y=s}},{key:"createSensor",value:function(e,t){var n,r=0===t,o=new THREE.SphereBufferGeometry(e,32,32);n=r?new THREE.MeshLambertMaterial({color:"#57a1d6",side:THREE.FrontSide}):new THREE.MeshBasicMaterial({color:"#57a1d6",side:THREE.FrontSide,wireframe:!0,wireframeLinewidth:1});var i=new THREE.Mesh(o,n);return i.material.transparent=!0,this.add(i),i}}]),t}();t.default=s,a.register("beacon",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Desk2d=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(0))&&r.__esModule?r:{default:r};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=scene,l=c.Component,h=c.Rect,f={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"},{type:"color",label:"leg-color",name:"legColor",property:"legColor"}]},d=function(e){function t(e,n,r,o){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._visualizer=r,i.createObject(n),i}return u(t,i.default),o(t,[{key:"createObject",value:function(e){var t=this.model,n=(t.type,t.left),r=t.top,o=t.width,i=t.height,a=t.depth,s=t.rotation,u=void 0===s?0:s,c=n+o/2-e.width/2,l=r+i/2-e.height/2,h=.5*a,f=this.createDeskLegs(o,i,a);this.add(f),r=a/2-this.boardThickness;var d=this.createDeskBoard(o,i);d.position.set(0,r,0),d.rotation.x=Math.PI/2,this.add(d),this.position.set(c,h,l),this.rotation.y=u||0}},{key:"createDeskLegs",value:function(e,t,n){var r=this.legThickness,o=this.margin;n-=this.boardThickness;for(var i=new THREE.Group,a=e/2-r/2-o,s=t/2-r/2-o,u=0;u<4;u++){var c=new THREE.BoxBufferGeometry(r,n,r),l=new THREE.MeshBasicMaterial({color:this.model.legColor||"#252525"}),h=new THREE.Mesh(c,l);switch(u){case 0:h.position.set(a,0,s);break;case 1:h.position.set(a,0,-s);break;case 2:h.position.set(-a,0,s);break;case 3:h.position.set(-a,0,-s)}i.add(h)}return i}},{key:"createDeskBoard",value:function(e,t){var n=new THREE.MeshBasicMaterial({color:this.model.fillStyle||"#ccaa76"}),r=new THREE.BoxGeometry(e,t,10,1,1);return new THREE.Mesh(r,n)}},{key:"cube",value:function(e){var t=.5*e.width,n=.5*e.height,r=.5*e.depth,o=new THREE.Geometry;return o.vertices.push(new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(t,-n,r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,-n,-r),new THREE.Vector3(-t,-n,r),new THREE.Vector3(-t,n,-r),new THREE.Vector3(-t,n,r),new THREE.Vector3(t,n,-r),new THREE.Vector3(t,n,r),new THREE.Vector3(t,-n,-r),new THREE.Vector3(t,-n,r)),o}},{key:"raycast",value:function(e,t){}},{key:"onchange",value:function(e,t){e.hasOwnProperty("data")&&(this.data=e.data)}},{key:"boardThickness",get:function(){var e=this.model.depth;return Math.min(10,e/10)}},{key:"legThickness",get:function(){var e=this.model,t=e.width,n=e.height,r=Math.min(t,n);return Math.min(10,r/10)}},{key:"margin",get:function(){return Math.min(this.legThickness/5,2)}}]),t}();t.default=d;var p=t.Desk2d=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,h),o(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return f}}]),t}();l.register("desk",p),scene.Component3d.register("desk",d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Banner2d=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(0))&&r.__esModule?r:{default:r};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=scene,l=c.Component,h=c.ImageView,f=c.Component3d,d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"z-pos",name:"zPos",property:"zPos"},{type:"number",label:"depth",name:"depth",property:"depth"},{type:"number",label:"rotation",name:"rotation",property:"rotation"},{type:"color",label:"box-color",name:"boxColor",property:"boxColor"}]},p=function(e){function t(e,n,r){a(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._visualizer=r,o.createObject(n),o}return u(t,i.default),o(t,[{key:"createObject",value:function(e){var t=this.model,n=t.type,r=t.left,o=void 0===r?0:r,i=t.top,a=void 0===i?0:i,s=t.zPos,u=void 0===s?0:s,c=t.width,l=void 0===c?1:c,h=t.height,f=void 0===h?1:h,d=t.depth,p=void 0===d?1:d,y=t.rotation,m=void 0===y?0:y,b=o+l/2-e.width/2,v=a+f/2-e.height/2,g=u+.5*p;this.add(this.createCube(l,f,p));var _=this.createTextureBoard(l,p);this.add(_),_.position.set(0,0,.5*f),this.type=n,this.position.set(b,g,v),this.rotation.y=-m}},{key:"createCube",value:function(e,t,n){var r=this.model.boxColor,o=void 0===r?"#ccaa76":r,i=new THREE.BoxBufferGeometry(e,n,t),a=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide});return new THREE.Mesh(i,a)}},{key:"createTextureBoard",value:function(e,t){var n,r=this,o=this.model.fillStyle,i=void 0===o?"#ccaa76":o;if(i&&"pattern"==i.type&&i.image){var a=this._visualizer._textureLoader.load(this._visualizer.app.url(i.image),function(){r._visualizer.render_threed()});a.repeat.set(1,1),a.minFilter=THREE.LinearFilter,n=new THREE.MeshBasicMaterial({map:a,side:THREE.FrontSide})}else n=new THREE.MeshLambertMaterial({color:i||"#ccaa76",side:THREE.FrontSide});var s=new THREE.PlaneBufferGeometry(e,t,1,1);return new THREE.Mesh(s,n)}},{key:"raycast",value:function(e,t){}}]),t}();t.default=p;var y=t.Banner2d=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,h),o(t,[{key:"is3dish",value:function(){return!0}},{key:"nature",get:function(){return d}}]),t}();l.register("banner",y),f.register("banner",p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=scene,u=s.Component,c=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._model=e,r.createObject(e,n),r}return a(t,THREE.Mesh),r(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rx,i=e.rotation;this.type=e.type,this.createCone(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCone",value:function(e,t){var n=this.model.fillStyle,r=void 0===n?"lightgray":n;this.geometry=new THREE.ConeBufferGeometry(e,t,20),this.material=new THREE.MeshLambertMaterial({color:r,side:THREE.FrontSide})}},{key:"setEuler",value:function(e){var t=e.yaw,n=e.pitch,r=e.roll;this.setRotationFromEuler(new THREE.Vector3(r,n,t))}},{key:"setQuaternion",value:function(e){var t=e.x,n=e.y,r=e.z,o=e.w;this.setRotationFromQuaternion(new THREE.Quaternion(t,n,r,o))}},{key:"model",get:function(){return this._model}}]),t}();t.default=h;var f=t.Cone2d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c),r(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}();u.register("cone",f),scene.Component3d.register("cone",h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=scene,u=s.Component,c=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._model=e,a._visualizer=r,a.createObject(e,n),a}return a(t,THREE.Mesh),r(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rx,i=e.rotation;this.type=e.type,this.createSphere(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createSphere",value:function(e,t){var n=this.model.fillStyle,r=void 0===n?"lightgray":n;this.geometry=new THREE.SphereBufferGeometry(e,20,20),this.material=new THREE.MeshLambertMaterial({color:r,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}();t.default=h;var f=t.Sphere2d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c),r(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}();u.register("sphere",f),scene.Component3d.register("sphere",h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=scene,u=s.Component,c=s.Ellipse,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"rz",property:"rz"}]},h=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._model=e,r.createObject(e,n),r}return a(t,THREE.Mesh),r(t,[{key:"createObject",value:function(e,t){var n=e.cx-t.width/2,r=e.cy-t.height/2,o=this.model.rz/2,i=e.rotation;this.type=e.type,this.createCylinder(this.model.rx,this.model.rz),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCylinder",value:function(e,t){var n=this.model.fillStyle,r=void 0===n?"lightgray":n;this.geometry=new THREE.CylinderBufferGeometry(e,e,t,25),this.material=new THREE.MeshLambertMaterial({color:r,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}();t.default=h;var f=t.Cylinder2d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c),r(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}();u.register("cylinder",f),scene.Component3d.register("cylinder",h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=scene,u=s.Component,c=s.Rect,l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"},{type:"checkbox",label:"show-axis",name:"showAxis",property:"showAxis"}]},h=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a._model=e,a._visualizer=r,a.createObject(e,n),a.updateMatrixWorld(),e.showAxis){var s=new THREE.AxesHelper(100);a.add(s)}return a}return a(t,THREE.Mesh),r(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=e.zPos||.5*e.depth,i=e.rotation;this.type=e.type,this.createCube(e.width,e.height,e.depth),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createCube",value:function(e,t,n){var r=this.model.fillStyle,o=void 0===r?"lightgray":r;this.geometry=new THREE.BoxBufferGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}},{key:"mixer",get:function(){return this._mixer||(this._mixer=new THREE.AnimationMixer(this),this._visualizer.mixers.push(this._mixer)),this._mixer}}]),t}();t.default=h;var f=t.Cube2d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c),r(t,[{key:"is3dish",value:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return l}}]),t}();u.register("cube",f),scene.Component3d.register("cube",h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wall2d=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(3))&&r.__esModule?r:{default:r};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=scene,l=c.Component,h=c.RectPath,f=c.Shape,d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"}]},p=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createObject(n),r}return u(t,i.default),o(t,[{key:"createObject",value:function(e){var t=this.model,n=t.type,r=t.left,o=t.top,i=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,c=t.rotation,l=void 0===c?0:c,h=t.alpha,f=void 0===h?.7:h,d=r+i/2-e.width/2,p=o+a/2-e.height/2,y=.5*u;this.type=n,this.createWall(i,a,u),this.position.set(d,y,p),this.rotation.y=l,this.material.opacity=f,this.material.transparent=f<1}},{key:"createWall",value:function(e,t,n){var r=this.model.fillStyle,o=void 0===r?"gray":r;this.geometry=new THREE.BoxBufferGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"raycast",value:function(e,t){}}]),t}();t.default=p;var y=t.Wall2d=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,h(f)),o(t,[{key:"is3dish",value:function(){return!0}},{key:"nature",get:function(){return d}}]),t}();l.register("wall",y),scene.Component3d.register("wall",p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"setShape",value:function(e){var t=e.extrudedShape,n=e.extrudedOptions;this.extrudedShape=t,this.bb=new THREE.Box2,this.bb.setFromPoints(this.extrudedShape.extractPoints().shape),this.extrudedOptions=n}},{key:"generateTopUV",value:function(e,t,n,r,o){var i=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*o],l=t[3*o+1],h=this.bb,f=h.max.x-h.min.x,d=h.max.y-h.min.y;return[new THREE.Vector2((i-h.min.x)/f,1-(a-h.min.y)/d),new THREE.Vector2((s-h.min.x)/f,1-(u-h.min.y)/d),new THREE.Vector2((c-h.min.x)/f,1-(l-h.min.y)/d)]}},{key:"generateSideWallUV",value:function(e,t,n,r,o,i){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],h=t[3*r+2],f=t[3*o],d=t[3*o+1],p=t[3*o+2],y=t[3*i],m=t[3*i+1],b=t[3*i+2],v=this.extrudedOptions.amount,g=this.bb,_=g.max.x-g.min.x,w=g.max.y-g.min.y;return Math.abs(s-l)<.01?[new THREE.Vector2(a/_,1-u/v),new THREE.Vector2(c/_,1-h/v),new THREE.Vector2(f/_,1-p/v),new THREE.Vector2(y/_,1-b/v)]:[new THREE.Vector2(s/w,1-u/v),new THREE.Vector2(l/w,1-h/v),new THREE.Vector2(d/w,1-p/v),new THREE.Vector2(m/w,1-b/v)]}}]),e}();t.default=o},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){var a=/^\s+/,s=/\s+$/,u=0,c=i.round,l=i.min,h=i.max,f=i.random;function d(e,t){if(e=e||"",t=t||{},e instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t,n,r,u={r:0,g:0,b:0},c=1,f=null,d=null,p=null,y=!1,m=!1;return"string"==typeof e&&(e=function(e){e=e.replace(a,"").replace(s,"").toLowerCase();var t,n=!1;if(S[e])e=S[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=N.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=N.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=N.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=N.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=N.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=N.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=N.hex8.exec(e))?{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:I(t[4]),format:n?"name":"hex8"}:(t=N.hex6.exec(e))?{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"}:(t=N.hex4.exec(e))?{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=N.hex3.exec(e))&&{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==(void 0===e?"undefined":o(e))&&(W(e.r)&&W(e.g)&&W(e.b)?(t=e.r,n=e.g,r=e.b,u={r:255*z(t,255),g:255*z(n,255),b:255*z(r,255)},y=!0,m="%"===String(e.r).substr(-1)?"prgb":"rgb"):W(e.h)&&W(e.s)&&W(e.v)?(f=L(e.s),d=L(e.v),u=function(e,t,n){e=6*z(e,360),t=z(t,100),n=z(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),u=n*(1-(1-o)*t),c=r%6;return{r:255*[n,s,a,a,u,n][c],g:255*[u,n,n,s,a,a][c],b:255*[a,a,u,n,n,s][c]}}(e.h,f,d),y=!0,m="hsv"):W(e.h)&&W(e.s)&&W(e.l)&&(f=L(e.s),p=L(e.l),u=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=z(e,360),t=z(t,100),n=z(n,100),0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=a(u,s,e+1/3),o=a(u,s,e),i=a(u,s,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,f,p),y=!0,m="hsl"),e.hasOwnProperty("a")&&(c=e.a)),c=C(c),{ok:y,format:e.format||m,r:l(255,h(u.r,0)),g:l(255,h(u.g,0)),b:l(255,h(u.b,0)),a:c}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=c(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=n.ok,this._tc_id=u++}function p(e,t,n){e=z(e,255),t=z(t,255),n=z(n,255);var r,o,i=h(e,t,n),a=l(e,t,n),s=(i+a)/2;if(i==a)r=o=0;else{var u=i-a;switch(o=s>.5?u/(2-i-a):u/(i+a),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:s}}function y(e,t,n){e=z(e,255),t=z(t,255),n=z(n,255);var r,o,i=h(e,t,n),a=l(e,t,n),s=i,u=i-a;if(o=0===i?0:u/i,i==a)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:s}}function m(e,t,n,r){var o=[F(c(e).toString(16)),F(c(t).toString(16)),F(c(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function b(e,t,n,r){return[F(B(r)),F(c(e).toString(16)),F(c(t).toString(16)),F(c(n).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=A(n.s),d(n)}function g(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=A(n.s),d(n)}function _(e){return d(e).desaturate(100)}function w(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=A(n.l),d(n)}function E(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=h(0,l(255,n.r-c(-t/100*255))),n.g=h(0,l(255,n.g-c(-t/100*255))),n.b=h(0,l(255,n.b-c(-t/100*255))),d(n)}function k(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=A(n.l),d(n)}function O(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function T(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function R(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function j(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function P(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),o=360/n,i=[d(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(d(r));return i}function M(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],s=1/t;t--;)a.push(d({h:r,s:o,v:i})),i=(i+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=C(e),this._roundA=c(100*this._a)/100,this},toHsv:function(){var e=y(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=y(this._r,this._g,this._b),t=c(360*e.h),n=c(100*e.s),r=c(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=c(360*e.h),n=c(100*e.s),r=c(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[F(c(e).toString(16)),F(c(t).toString(16)),F(c(n).toString(16)),F(B(r))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*z(this._r,255))+"%",g:c(100*z(this._g,255))+"%",b:c(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*z(this._r,255))+"%, "+c(100*z(this._g,255))+"%, "+c(100*z(this._b,255))+"%)":"rgba("+c(100*z(this._r,255))+"%, "+c(100*z(this._g,255))+"%, "+c(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(H[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+b(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=d(e);n="#"+b(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(j,arguments)},triad:function(){return this._applyCombination(R,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},d.fromRatio=function(e,t){if("object"==(void 0===e?"undefined":o(e))){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:L(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:f(),g:f(),b:f()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),o=d(t).toRgb(),i=n/100;return d({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,o,i=d.readability(e,t);switch(o=!1,(r=function(e){var t,n;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},d.mostReadable=function(e,t,n){var r,o,i,a,s=null,u=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=d.readability(e,t[c]))>u&&(u=r,s=d(t[c]));return d.isReadable(e,s,{level:i,size:a})||!o?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var S=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(S);function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function z(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=l(t,h(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function A(e){return l(1,h(0,e))}function D(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function L(e){return e<=1&&(e=100*e+"%"),e}function B(e){return i.round(255*parseFloat(e)).toString(16)}function I(e){return D(e)/255}var G,V,U,N=(V="[\\s|\\(]+("+(G="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",U="[\\s|\\(]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",{CSS_UNIT:new RegExp(G),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!N.CSS_UNIT.exec(e)}void 0!==e&&e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(2)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"shape",get:function(){var e=this.model,t=e.width,n=e.height,r=e.round,o=new THREE.Shape;if(r>0){var i=r/100*(t/2);o.moveTo(i,0),o.lineTo(t-i,0),o.quadraticCurveTo(t,0,t,i),o.lineTo(t,n-i),o.quadraticCurveTo(t,n,t-i,n),o.lineTo(i,n),o.quadraticCurveTo(0,n,0,n-i),o.lineTo(0,i),o.quadraticCurveTo(0,0,i,0)}else o.moveTo(0,0),o.lineTo(t,0),o.lineTo(t,n),o.lineTo(0,n),o.lineTo(0,0);return o}}]),t}();t.default=s,i.default.register("rect",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r},s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._visualizer=r,o.createObject(n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"createObject",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,s=n.depth,u=n.rotation,c=void 0===u?0:u;if(t.extObject){var l=r+i/2-e.width/2,h=o+a/2-e.height/2;r-=e.width/2,o-=e.height/2,this.type="person";var f=t.extObject.clone();this.add(f),i/=3.7,a/=3.7,s/=3.7,this.scale.set(i,s,a),this.position.set(l,0,h),this.rotation.y=c}else setTimeout(this.createObject.bind(this,e),50)}}],[{key:"extObject",get:function(){return o||function e(){if(!e.done){e.done=!0;var t=new THREE.TGALoader;THREE.Loader.Handlers.add(/\.tga$/i,t);var n=new THREE.OBJLoader(THREE.DefaultLoadingManager),r=new THREE.MTLLoader(THREE.DefaultLoadingManager);n.setPath("/obj/Casual_Man_02/"),r.setPath("/obj/Casual_Man_02/"),r.load("Casual_Man.mtl",function(e){e.preload(),n.setMaterials(e),e.side=THREE.frontSide,n.load("Casual_Man.obj",function(e){o=e})})}}(),o}}]),t}();t.default=s,scene.Component3d.register("person",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sensor=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(0))&&r.__esModule?r:{default:r};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=["#6666ff","#ccccff","#ffcccc","#cc3300"],l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"z-pos",name:"zPos",property:"zPos"},{type:"string",label:"location",name:"location",property:"location"}]},h=function(e){function t(e,n,r){a(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._container=r,o.userData.temperature=e.humidity?e.humidity[0]:0,o.userData.humidity=e.humidity?e.humidity[1]:0,o.createObject(n),o}return u(t,i.default),o(t,[{key:"createObject",value:function(e){var t=this.model,n=(t.left,t.top,t.width,t.height,t.depth),r=t.cx,o=t.cy,i=t.rx,a=t.ry,s=t.zPos,u=t.rotation,c=void 0===u?0:u,l=t.location;r-=e.width/2,o-=e.height/2;var h=(s||0)+n/2;this.type="humidity-sensor",l&&(this.name=l);for(var f=0;f<3;f++)this.createSensor(i*(1+.5*f),a*(1+.5*f),n*(1+.5*f),f).material.opacity=.5-.15*f;this.position.set(r,h,o),this.rotation.y=c,this._container._heatmap.addData({x:Math.floor(r),y:Math.floor(o),value:this.userData.temperature}),this._container.updateHeatmapTexture()}},{key:"createSensor",value:function(e,t,n,r){var o,i=0===r,a=new THREE.SphereBufferGeometry(e,32,32);o=i?new THREE.MeshLambertMaterial({color:"#cc3300",side:THREE.FrontSide}):new THREE.MeshBasicMaterial({color:"#cc3300",side:THREE.FrontSide,wireframe:!0,wireframeLinewidth:1});var s=new THREE.Mesh(a,o);return s.material.transparent=!0,i?s.onmousemove=this.onmousemove:s.raycast=function(){},this.add(s),s}},{key:"onUserDataChanged",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onUserDataChanged",this).call(this);var e=this._model,n=e.cx,r=e.cy;n=Math.floor(n),r=Math.floor(r);var o=this.userData.temperature,i=!0,a=!1,s=void 0;try{for(var u,l=this.children[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var h,f=u.value;h=o<0?0:o<10?1:o<20?2:3,f.material.color.set(c[h])}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}var d=this._container._heatmap._store._data[n][r];this._container._heatmap.addData({x:n,y:r,value:o-d}),this._container._heatmap.repaint(),this._container.updateHeatmapTexture()}},{key:"onmousemove",value:function(e,t){var n=t.tooltip||t._scene2d.getObjectByName("tooltip");if(n&&(t._scene2d.remove(n),t.tooltip=null,t.render_threed()),this.parent.visible){this.parent.userData||(this.parent.userData={});var r="";for(var o in this.parent.userData)this.parent.userData[o]&&(r+=o+": "+this.parent.userData[o]+"\n");if(r.length>0){n=t.tooltip=t.makeTextSprite(r);var i=new THREE.Vector3,a=n.getWorldScale().clone(),s=a.x/t.model.width,u=a.y/t.model.height;i.set(t._mouse.x,t._mouse.y,.5),a.normalize(),a.x=a.x/2*s,a.y=-a.y/2*u,a.z=0,i.add(a),i.unproject(t._2dCamera),n.position.set(i.x,i.y,i.z),n.name="tooltip",n.scale.x=n.scale.x*s,n.scale.y=n.scale.y*u,t._scene2d.add(n),t._renderer&&t._renderer.render(t._scene2d,t._2dCamera),t.invalidate()}}}}]),t}();t.default=h;var f=scene,d=f.Component,p=f.Ellipse,y=t.Sensor=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,p),o(t,[{key:"is3dish",value:function(){return!0}},{key:"_draw",value:function(e){var t=this.bounds,n=t.left,r=t.top,o=t.width,i=t.height;e.beginPath(),e.rect(n,r,o,i),this.model.fillStyle={type:"pattern",fitPattern:!0,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABBCAYAAACTiffeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDQ0E1QkUzRTRDMDcxMUU2QkMyRDk3MzlGN0EzMTI2NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDQ0E1QkUzRjRDMDcxMUU2QkMyRDk3MzlGN0EzMTI2NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJFQ0Q4QzE5NEI1MjExRTZCQzJEOTczOUY3QTMxMjY1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJFQ0Q4QzFBNEI1MjExRTZCQzJEOTczOUY3QTMxMjY1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tgU1kQAAB4pJREFUeNrcWktMVFcYPgPIVHxTERpsq4XaBwZbjRIjaUO0qbGuWDQQFnZhgkuty7qUhMQYTdqFGl10YcSYUBfWkEjCxtREClEDJkZgbAsWxYIIKjPCTP/v8p3xOtyZe+4dRtA/+XIv957H/53zv+4ZArFYTL0NEvBCJBAIzHhWsmZNllwWChYJ3iGCaC7IEWQLooJJXsNERPBc8LT33r0XbnO76WlEJJGAKA9F8wUrSGBBQpcsKm3vGCOmbM+m2GZC8ETwWDAuxKJeSaUkYifAlX9X8J5gqU1hRWWwuuO8QrEXVFQrm00EiTzuZA7bxEge/UYEQ0LouSkZRyIOBIqJXCqfxQkfCh4JRmXSSa92jblL164FoWXc3eUkFSXGBPdl7HE3Mq8QcSBQJFhjs3ms6KCgvycUGnHymXRE5sTurBIU0tc0IZjcgBB6loxMnEgCicVy+YwmpM3nH0FIBgtnOgJxp7BD7wuW2ILFABbS7kOORDjAh/LnOq4+SPwruOO0Gq+JUIHcrqUvgQD0uKv9ZwYR6QDFy+nMWQyPN6XDAw+mEaStL6Uz59peRxh2x+hTYx7GhW4lNHUdEEBm2IkIJv+Kk0P5dmkYcZkgi8Q/EqxmSI7aIlnUFoq1M0bp0GH6W4j2HzYgtFIuZbaxe8RX789wdiGzkop1ycCxFANitddzB/M4cMCWK5ATRhmGdd4IMucsseWdSZtD93HeRy5kMN9GjnEDQccx/KaKRDIIdqtC8CUH0spbfkRnfOiW0GScZbad/IC7ppPlPcGfMBsXPYJCYsw4j9g6l8rlW65qNlf7Jid9kmbI/VTwBU1zkrgh6JCxp3wnRDsZOto3gk1cOQx8TfDHbIZimQcTfkI/zeM8/wkuJS6U5xJFfAaK1wo+5iOYULMMPJSpkEuz+VqwgeaGcPubzDmYqnh0LRqFDDL7Hm7176alCE1mKTM0Vve5FxOU/kjIu+mHfwkuiE9E06p+hcxyUeKxy8QLGBoRUZBUC7iiAVtIjtCZewSdepVTjIn6rhI7IiQis/I9kiyayWQL6UNVgsVUPjF3BGylfNR2f1dwWQjdSeU7QsJVybQ+rGQShOEfWL3qRNfNaBais46zvNAhdx13bZUt5HYKmpyyvfFCe/3UBRlGmO8F3zEUI3q10odGDSMUfKCauQSLgLzxi/T/2ysJX0ToMyizG/lhhJX/WRS47zPkwixruCDYkUNiSo8z+s2eQAZJbBdXMeJlFR1M9HO5/IjQLiQu+y6V/YJFo+9xEsjkp6NLIN3jIP0ds3fvXjjzVlYAKChLbRWxog/0M/R2ofxAhXDmzJlRr/4wq6alRQhsZeLayWjkRRCtWlCGnD59+tqcEBECWPk6ljBFaVYmSIznBGeFUMdrISIE4Kn7BPWshxwlJydH1dTUqC1btlh/X79+XTU1NanJyZQVDvLPScEJIRTLGBEhgZLhoOCAW9u6ujpVVVX1yrMrV66o8+fPm0x1THBUyAyY6pblgQSct8GEBKSiosK6NjQ0qCNHjlj327ZtM50OczRwTiPJ8bATh1gFG0leXp51DYVCM55BZLXt4zsNsYfvfjLZmRxDnzjohYTh4pg0w5zD0vagm8+YmNY+U3PKkBygDv59hCG2Xs291FMX36ZVlyrEpiMGPmKXDdSlwzMRZuzaTC2xoY/YpVb6XEhWAaQyrd2zkLFnU4qok7mPsADcqeaf7KRuxqa11UcBmEkf0bKRurWYEtmU6aX14SN23VpMfWS9mr+y3ouzl85jIqVefGR1prXx6SNJdUtGJH8e+0h+WmX8fJdkRIbTGbS8vNy69vX1xZ/pe/0uDRn2QqTfzwwFBQWqtrZW1ddP15m3b9+Ov9P3eIc2aOtT+r0Q6fFDorq6Wm3fvl0Fg0HrG/3ixYvx97jHM7xDG7T1SabHC5Eur6Pv2LFDbd68WU1MTKjGxkZ16tSpGW3wDO/QBm3Rx4d0eSHS4dUnKisrrfvjx4+rnp7kG4p3aANBHx8+0+GFCErlTtORy8rK4uakSayIxVR1JKwOP3tqAfcreGKDNtrM0NeDdFI3MyKSrEad6plkUlJSYl3b2triz6peRNSucEQVTUUt4B7PtOi2uq+htFA3T3nkkpo+AXSVwsJC6zow8PKwY6PDQZz9mW6r+xrIIHXy9s3OL7Fz8yjnnUt1PuyW2c+q6WPMlPLgwfT/3RQXF7805pyZ1Y/9mW6r+7rITeri7xSFB8on3Wbp7e2d9gvbEWnbglx1OZirBrOzLOAez+I+xLa6r4ucdDvcNqm1Tqjps9ik0t3drcLhsHVgXVo6XWWPBAKqOTeoDuUtsoD7Ef5ShTZoiz7o6yLHqINKiwhP+I4Kfk3W5tatW+rq1avW/f79++NkHD8m5B3aQNAHfVMI5jxqcjJvfBrPA+Wk57+6REHGhiBPIMTq6ASfgDnpnxna29tVc3OzGhoaSkXisJAwKpdm9WcFkEHZgYyNZOckMCfsRGtrayoSnn9WyMgPPSg7kLGR7HSeQHSCY8MnUpjT6/mhJ4HQm/3TmwOhN/vHUAdCvn6eTlY7zRmRuZa3hsj/AgwA2qER3p3SY8gAAAAASUVORK5CYII="},this.drawFill(e)}},{key:"nature",get:function(){return l}}]),t}();d.register("humidity-sensor",y),scene.Component3d.register("humidity-sensor",h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r},s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createObject(n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"createObject",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,s=n.depth,u=n.rotation,c=void 0===u?0:u;if(t.extObject){var l=r+i/2-e.width/2,h=o+a/2-e.height/2;r-=e.width/2,o-=e.height/2,this.type="forklift";var f=t.extObject.clone();this.add(f),this.scale.set(i,s,a),this.position.set(l,0,h),this.rotation.y=c}else setTimeout(this.createObject.bind(this,e),50)}}],[{key:"extObject",get:function(){return o||function e(){if(!e.done){e.done=!0;var t=new THREE.OBJLoader(THREE.DefaultLoadingManager),n=new THREE.MTLLoader(THREE.DefaultLoadingManager);t.setPath("/obj/Fork_lift/"),n.setPath("/obj/Fork_lift/"),n.load("fork_lift.mtl",function(e){e.preload(),t.setMaterials(e),e.side=THREE.frontSide,t.load("fork_lift.obj",function(e){o=e})})}}(),o}}]),t}();t.default=s,scene.Component3d.register("forklift",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=scene,u=s.Component,c=s.Rect,l=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._model=e,r.createObject(e,n),r}return a(t,THREE.Mesh),r(t,[{key:"createObject",value:function(e,t){var n=e.left+e.width/2-t.width/2,r=e.top+e.height/2-t.height/2,o=.5*e.depth,i=e.rotation;this.type=e.type,this.createDoor(e.width,e.height,e.depth),this.position.set(n,o,r),this.rotation.y=i||0}},{key:"createDoor",value:function(e,t,n){var r=this.model.fillStyle,o=void 0===r?"saddlebrown":r;this.geometry=new THREE.BoxBufferGeometry(e,n,t),this.material=new THREE.MeshLambertMaterial({color:o,side:THREE.FrontSide})}},{key:"model",get:function(){return this._model}}]),t}();t.default=l;var h=t.Door2d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,c),r(t,[{key:"is3dish",value:function(){return!0}}]),t}();u.register("door",h),scene.Component3d.register("door",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=scene.Component3d,i=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._model=e,o._visualizer=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,THREE.Group),r(t,[{key:"dispose",value:function(){var e=this;this.children.slice().forEach(function(t){t.dispose&&t.dispose(),t.geometry&&t.geometry.dispose&&t.geometry.dispose(),t.material&&t.material.dispose&&t.material.dispose(),t.texture&&t.texture.dispose&&t.texture.dispose(),e.remove(t)})}},{key:"createObject",value:function(e){var t=this.model,n=t.left,r=void 0===n?0:n,o=t.top,i=void 0===o?0:o,a=t.width,s=void 0===a?0:a,u=t.height,c=void 0===u?0:u,l=r+s/2-e.width/2,h=i+c/2-e.height/2;this.position.x=l,this.position.z=h}},{key:"createChildrenObject",value:function(e){var t=this;this._model.components.forEach(function(n){var r=o.register(n.type);if(r){var i=new r(n,e,t._visualizer);i&&(i.name=n.id,t.add(i))}else console.warn("Class not found : 3d class is not exist")})}},{key:"model",get:function(){return this._model}}]),t}();t.default=i,o.register("group",i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RackTable=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(25)),a=(s(n(6)),s(n(5)));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=scene,f=(h.Table,h.Component),d=h.Component3d,p=h.Container,y=h.Layout,m=h.Model,b={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"rows",name:"rows",property:"rows"},{type:"number",label:"columns",name:"columns",property:"columns"},{type:"string",label:"zone",name:"zone",property:"zone"},{type:"number",label:"shelves",name:"shelves",property:"shelves"},{type:"number",label:"depth",name:"depth",property:"depth"},{type:"string",label:"location-pattern",name:"locPattern",property:{placeholder:"{z}{s}-{u}-{sh}"}},{type:"string",label:"shelf-pattern",name:"shelfPattern",property:{placeholder:"#, 00, 000"}},{type:"number",label:"stock-scale",name:"stockScale"},{type:"checkbox",label:"hide-rack-frame",name:"hideRackFrame"}]},v={all:["top","left","bottom","right"],out:["top","left","bottom","right"],left:["left"],right:["right"],top:["top"],bottom:["bottom"],leftright:["left","right"],topbottom:["top","bottom"]},g={strokeStyle:"",lineDash:"solid",lineWidth:0},_={strokeStyle:"#999",lineDash:"solid",lineWidth:1},w=y.get("table");function E(e){return m.compile({type:"rack-table-cell",strokeStyle:"black",fillStyle:"transparent",left:0,top:0,width:1,height:1,textWrap:!0,isEmpty:!1,border:O(_,"all")},e)}function k(e,t){var n=JSON.parse(JSON.stringify(e));return delete n.text,m.compile(n,t)}function O(e,t){return(v[t]||[]).reduce(function(t,n){return t[n]=e,t},{})}function T(e,t,n){e&&e.set("border",Object.assign({},e.get("border")||{},O(t,n)))}function R(e,t,n,r){return 0==r||!(r%t)||-1==n.indexOf(r-1)}function x(e,t,n,r){return r==e-1||r%t==t-1||-1==n.indexOf(r+1)}function j(e,t,n,r){return r<t||-1==n.indexOf(r-t)}function P(e,t,n,r){return r>e-t-1||-1==n.indexOf(r+t)}function M(e,t){return t-e}function S(e,t){return t+e}function H(e,t){return t%e?t-1:-1}function C(e,t){return(t+1)%e?t+1:-1}function z(e,t){for(var n=[],r=0;r<t;r++)n.push(1);return n}var A={ondragmove:function(e,t,n){var r=n.textBounds,o=r.left,i=(r.top,r.width),a=(r.height,n.widths_sum),s=n.widths.slice(),u=o+s.slice(0,t+1).reduce(function(e,t){return e+t},0)/a*i,c=(n.transcoordP2S(e.x,e.y).x-u)/i*a,l=a/i*5;c=c<0?-Math.min(s[t]-l,-c):Math.min(s[t+1]-l,c),s[t]=Math.round(100*(s[t]+c))/100,s[t+1]=Math.round(100*(s[t+1]-c))/100,n.set("widths",s)}},D={ondragmove:function(e,t,n){var r=n.textBounds,o=(r.left,r.top),i=(r.width,r.height),a=n.heights_sum,s=n.heights.slice();t-=n.columns-1;var u=o+s.slice(0,t+1).reduce(function(e,t){return e+t},0)/a*i,c=(n.transcoordP2S(e.x,e.y).y-u)/i*a,l=a/i*5;c=c<0?-Math.min(s[t]-l,-c):Math.min(s[t+1]-l,c),s[t]=Math.round(100*(s[t]+c))/100,s[t+1]=Math.round(100*(s[t+1]-c))/100,n.set("heights",s)}},F=function(e){function t(e,n,r,o){u(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._visualizer=r,i._sceneComponent=o,i.createRacks(n),i}return l(t,i.default),r(t,[{key:"dispose",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),delete this._visualizer}},{key:"createRacks",value:function(e){var t=this,n=this.model,r=n.components,o=void 0===r?[]:r,i=n.left,s=n.top,u=n.width,c=n.height,l=n.rotation,h=void 0===l?0:l,f=n.zone,d=n.locPattern,p=n.shelfPattern,y=n.shelves,m=void 0===y?1:y,b=n.depth,v=void 0===b?1:b,g=(n.columns,n.rows,n.minUnit,n.minSection,n.stockScale),_=void 0===g?.7:g,w=n.hideRackFrame,E=i+u/2-e.width/2,k=s+c/2-e.height/2;this.position.set(E,0,k),this.rotation.y=-h,o.forEach(function(e){var n={left:e.left,top:e.top,width:e.width,height:e.height,depth:v,shelves:m,unit:e.unit,section:e.section,zone:f,locPattern:d,shelfPattern:p,isEmpty:e.isEmpty,hideRackFrame:w,stockScale:_};n.isEmpty||(e=new a.default(n,t.model,t._visualizer),t.add(e))})}},{key:"mergeObjects",value:function(){var e,t,n=[],r=[];this.children.forEach(function(e){n=n.concat(e.frames),r=r.concat(e.boards)}),n.forEach(function(t){t.children.forEach(function(t){e?e.geometry.merge(t.geometry):e=t})}),r.forEach(function(e){t?t.geometry.merge(e.geometry):t=e})}},{key:"raycast",value:function(e,t){}},{key:"onchange",value:function(e,t){e.hasOwnProperty("data")&&(this.data=e.data)}}]),t}();t.default=F;var L=t.RackTable=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,p),r(t,[{key:"is3dish",value:function(){return!0}},{key:"dispose",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),delete this._focused_cell}},{key:"created",value:function(){var e=this.rows*this.columns,t=this.size()-e;if(0!=t){if(t>0){var n=this._components.slice(t);this.remove(n)}else{for(var r=[],o=0;o<-t;o++)r.push(E(this.app));this.add(r)}var i=this.get("widths"),a=this.get("heights");(!i||i.length<this.columns)&&this.set("widths",this.widths),(!a||a.length<this.rows)&&this.set("heights",this.heights)}}},{key:"buildCells",value:function(e,t,n,r){if(e<n){var o=this._components.slice(r*e);this.remove(o)}var i=Math.min(e,n);if(t>r)for(var a=0;a<i;a++)for(var s=r;s<t;s++)this.insertComponentAt(E(this.app),a*t+s);else if(t<r){for(var u=[],c=0;c<i;c++)for(var l=t;l<r;l++)u.push(this.components[c*r+l]);this.remove(u)}if(e>n){for(var h=[],f=n;f<e;f++)for(var d=0;d<t;d++)h.push(E(this.app));this.add(h)}this.set({widths:this.widths,heights:this.heights})}},{key:"setCellsStyle",value:function(e,t,n){var r=this,o=this.components,i=o.length,a=this.get("columns"),s=[];e.forEach(function(e){if(s.push(e),e.colspan||e.rowspan)for(var t=r.getRowColumn(e).column,n=r.getRowColumn(e).row,o=n;o<n+e.rowspan;o++)for(var i=t;i<t+e.colspan;i++)o==n&&i==t||s.push(r.components[o*r.columns+i])});var u=s.map(function(e){return o.indexOf(e)});u.forEach(function(e){var r=o[e];switch(n){case"all":T(r,t,n),R(0,a,u,e)&&T(o[H(a,e)],t,"right"),x(i,a,u,e)&&T(o[C(a,e)],t,"left"),j(0,a,u,e)&&T(o[M(a,e)],t,"bottom"),P(i,a,u,e)&&T(o[S(a,e)],t,"top");break;case"in":R(0,a,u,e)||T(r,t,"left"),x(i,a,u,e)||T(r,t,"right"),j(0,a,u,e)||T(r,t,"top"),P(i,a,u,e)||T(r,t,"bottom");break;case"out":R(0,a,u,e)&&(T(r,t,"left"),T(o[H(a,e)],t,"right")),x(i,a,u,e)&&(T(r,t,"right"),T(o[C(a,e)],t,"left")),j(0,a,u,e)&&(T(r,t,"top"),T(o[M(a,e)],t,"bottom")),P(i,a,u,e)&&(T(r,t,"bottom"),T(o[S(a,e)],t,"top"));break;case"left":R(0,a,u,e)&&(T(r,t,"left"),T(o[H(a,e)],t,"right"));break;case"right":x(i,a,u,e)&&(T(r,t,"right"),T(o[C(a,e)],t,"left"));break;case"center":R(0,a,u,e)||T(r,t,"left"),x(i,a,u,e)||T(r,t,"right");break;case"middle":j(0,a,u,e)||T(r,t,"top"),P(i,a,u,e)||T(r,t,"bottom");break;case"top":j(0,a,u,e)&&(T(r,t,"top"),T(o[M(a,e)],t,"bottom"));break;case"bottom":P(i,a,u,e)&&(T(r,t,"bottom"),T(o[S(a,e)],t,"top"));break;case"clear":T(r,g,"all"),R(0,a,u,e)&&T(o[H(a,e)],g,"right"),x(i,a,u,e)&&T(o[C(a,e)],g,"left"),j(0,a,u,e)&&T(o[M(a,e)],g,"bottom"),P(i,a,u,e)&&T(o[S(a,e)],g,"top")}})}},{key:"getRowColumn",value:function(e){var t=this.components.indexOf(e);return this.components.length,{column:t%this.columns,row:Math.floor(t/this.columns)}}},{key:"getCellsByRow",value:function(e){return this.components.slice(e*this.columns,(e+1)*this.columns)}},{key:"getCellsByColumn",value:function(e){for(var t=[],n=0;n<this.rows;n++)t.push(this.components[this.columns*n+e]);return t}},{key:"deleteRows",value:function(e){var t=this,n=[];e.forEach(function(e){var r=t.getRowColumn(e).row;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse();var r=this.heights.slice();n.forEach(function(e){t.remove(t.getCellsByRow(e))}),r.splice(n,1),this.model.rows-=n.length,this.set("heights",r)}},{key:"deleteColumns",value:function(e){var t=this,n=[];e.forEach(function(e){var r=t.getRowColumn(e).column;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse(),n.forEach(function(e){var n=t.widths.slice();t.remove(t.getCellsByColumn(e)),n.splice(e,1),t.model.columns-=1,t.set("widths",n)})}},{key:"insertCellsAbove",value:function(e){var t=this,n=[];if(e.forEach(function(e){var r=t.getRowColumn(e).row;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse(),n.length>=2)return!1;var r=n[0],o=[],i=[];n.forEach(function(e){for(var a=0;a<t.columns;a++)i.push(k(t.components[e*t.columns+a].model,t.app));o.push(t.heights[e]),i.reverse().forEach(function(e){t.insertComponentAt(e,r*t.columns)});var s=t.heights.slice();s.splice.apply(s,[r,0].concat(o)),t.set("heights",s),t.model.rows+=n.length,t.clearCache()})}},{key:"insertCellsBelow",value:function(e){var t=this,n=[];if(e.forEach(function(e){var r=t.getRowColumn(e).row;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse(),n.length>=2)return!1;var r=n[n.length-1]+1,o=[],i=[];n.forEach(function(e){for(var n=0;n<t.columns;n++)i.push(k(t.components[e*t.columns+n].model,t.app));o.push(t.heights[e]),i.reverse().forEach(function(e){t.insertComponentAt(e,r*t.columns)});var a=t.heights.slice();a.splice.apply(a,[r,0].concat(o)),t.set("heights",a),t.model.rows+=1,t.clearCache()})}},{key:"insertCellsLeft",value:function(e){var t=this,n=[];if(e.forEach(function(e){var r=t.getRowColumn(e).column;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse(),n.length>=2)return!1;var r=n[0],o=[],i=[];n.forEach(function(e){for(var a=0;a<t.rows;a++)i.push(k(t.components[e+t.columns*a].model,t.app));o.push(t.widths[e]);var s=t.columns,u=t.rows;i.reverse().forEach(function(e){0==u&&(u=t.rows,s++),u--,t.insertComponentAt(e,r+u*s)});var c=t.widths.slice();t.model.columns+=n.length,c.splice.apply(c,[r,0].concat(o)),t.set("widths",c)})}},{key:"insertCellsRight",value:function(e){var t=this,n=[];if(e.forEach(function(e){var r=t.getRowColumn(e).column;-1==n.indexOf(r)&&n.push(r)}),n.sort(function(e,t){return e-t}),n.reverse(),n.length>=2)return!1;var r=n[n.length-1]+1,o=[],i=[];n.forEach(function(e){for(var a=0;a<t.rows;a++)i.push(k(t.components[e+t.columns*a].model,t.app));o.push(t.widths[e]);var s=t.columns,u=t.rows;i.reverse().forEach(function(e){0==u&&(u=t.rows,s++),u--,t.insertComponentAt(e,r+u*s)});var c=t.widths.slice();t.model.columns+=n.length,c.splice.apply(c,[r,0].concat(o)),t.set("widths",c)})}},{key:"distributeHorizontal",value:function(e){var t=this,n=[];e.forEach(function(e){var r=t.getRowColumn(e);-1==n.indexOf(r.column)&&n.push(r.column)});var r=n.reduce(function(e,n){return e+t.widths[n]},0),o=Math.round(r/n.length*100)/100,i=this.widths.slice();n.forEach(function(e){i[e]=o}),this.set("widths",i)}},{key:"distributeVertical",value:function(e){var t=this,n=[];e.forEach(function(e){var r=t.getRowColumn(e);-1==n.indexOf(r.row)&&n.push(r.row)});var r=n.reduce(function(e,n){return e+t.heights[n]},0),o=Math.round(r/n.length*100)/100,i=this.heights.slice();n.forEach(function(e){i[e]=o}),this.set("heights",i)}},{key:"increaseLocation",value:function(e,t,n,r){var o=this.root.selected,i=this.classifyByRow(o),a=this.getAisleRowIndices(i),s=this.classifyCellsBySection(i,a),u=this.rearrangeByAisle(e,s,a);t&&(u=this.removeEmptyCells(u));var c=this.mergeRows(u);this.setLocations(c,n,r)}},{key:"classifyByRow",value:function(e){var t=[];return e.forEach(function(e){var n=e.index,r=n.row,o=n.column;t[r]||(t[r]=[]),t[r][o]=e}),t}},{key:"findAisle",value:function(e){return e?e.filter(function(e){return e[0].isAisle}):[]}},{key:"getAisleRowIndices",value:function(e){var t=[];return this.findAisle(e).forEach(function(n){t.push(e.indexOf(n))}),t}},{key:"classifyCellsBySection",value:function(e,t){var n,r=[],o=!1;return e.forEach(function(e,i){var a=t.indexOf(i)>-1;o||a||(n=[],r.push(n)),o=a,n.push(e)}),r}},{key:"rearrangeByAisle",value:function(e,t){var n=[];switch(e.toLowerCase()){case"cw":var r=!1;t.forEach(function(e,t){var o=[];n.push(o),e.forEach(function(e,t){r&&e.reverse(),t%2==0&&(o.push(e),r=!r)})});break;case"ccw":r=!0,t.forEach(function(e,t){var o=[];n.push(o),e.forEach(function(e,t){r&&e.reverse(),t%2==0&&(o.push(e),r=!r)})});break;case"zigzag":t.forEach(function(e,t){var r=[];e.forEach(function(e,t){t%2==0&&r.push(e)});var o=r.length,i=[],a=[];r.forEach(function(e,t){e.forEach(function(e,n){i[t+n*r.length]=e})});for(var s=i.length/o,u=0;u<o;u++)a.push(i.slice(u*s,(u+1)*s));n.push(a)});break;case"zigzag-reverse":t.forEach(function(e,t){var r=[];e.forEach(function(e,t){t%2==0&&(e.reverse(),r.push(e))});var o=r.length,i=[],a=[];r.forEach(function(e,t){e.forEach(function(e,n){i[t+n*r.length]=e})});for(var s=i.length/o,u=0;u<o;u++)a.push(i.slice(u*s,(u+1)*s));n.push(a)})}return n}},{key:"removeEmptyCells",value:function(e){var t=[];return e.forEach(function(e){var n=[];t.push(n),e.forEach(function(e){var t=[];n.push(t),e.forEach(function(e,n){e.isEmpty||t.push(e)})})}),t}},{key:"mergeRows",value:function(e){var t=[];return e.forEach(function(e){var n=[];e.forEach(function(e){var t=[];e.forEach(function(e){t=t.concat(e)}),n=n.concat(t)}),t.push(n)}),t}},{key:"setLocations",value:function(e,t,n){var r=Number(t)||1;e.forEach(function(e){var t=Number(n)||1;e.forEach(function(e){e.isEmpty?(e.set("section",null),e.set("unit",null)):(e.set("section",String(r).padStart(2,0)),e.set("unit",String(t).padStart(2,0))),t++}),r++})}},{key:"onchange",value:function(e,t){(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o in n)if(e.hasOwnProperty(n[o]))return!0})(e,"rows","columns")&&this.buildCells(this.get("rows"),this.get("columns"),t.hasOwnProperty("rows")?t.rows:this.get("rows"),t.hasOwnProperty("columns")?t.columns:this.get("columns")),this.invalidate()}},{key:"oncellchanged",value:function(e,t){this.invalidate()}},{key:"focusible",get:function(){return!1}},{key:"widths",get:function(){var e=this.get("widths");return e?e.length<this.columns?e.concat(z(0,this.columns-e.length)):e.length>this.columns?e.slice(0,this.columns):e:z(0,this.columns)}},{key:"heights",get:function(){var e=this.get("heights");return e?e.length<this.rows?e.concat(z(0,this.rows-e.length)):e.length>this.rows?e.slice(0,this.rows):e:z(0,this.rows)}},{key:"layout",get:function(){return w}},{key:"rows",get:function(){return this.get("rows")}},{key:"columns",get:function(){return this.get("columns")}},{key:"lefts",get:function(){var e=this;return this.components.filter(function(t,n){return!(n%e.columns)})}},{key:"centers",get:function(){var e=this;return this.components.filter(function(t,n){return n%e.columns&&(n+1)%e.columns})}},{key:"rights",get:function(){var e=this;return this.components.filter(function(t,n){return!((n+1)%e.columns)})}},{key:"tops",get:function(){return this.components.slice(0,this.columns)}},{key:"middles",get:function(){return this.components.slice(this.columns,this.columns*(this.rows-1))}},{key:"bottoms",get:function(){return this.components.slice(this.columns*(this.rows-1))}},{key:"all",get:function(){return this.components}},{key:"widths_sum",get:function(){var e=this,t=this.widths;return t?t.filter(function(t,n){return n<e.columns}).reduce(function(e,t){return e+t},0):this.columns}},{key:"heights_sum",get:function(){var e=this,t=this.heights;return t?t.filter(function(t,n){return n<e.rows}).reduce(function(e,t){return e+t},0):this.rows}},{key:"nature",get:function(){return b}},{key:"controls",get:function(){var e=this.widths,t=this.heights,n=this.textBounds,r=n.width/this.widths_sum,o=n.height/this.heights_sum,i=n.left,a=n.top,s=[];return e.slice(0,this.columns-1).forEach(function(e){i+=e*r,s.push({x:i,y:n.top,handler:A})}),t.slice(0,this.rows-1).forEach(function(e){a+=e*o,s.push({x:n.left,y:a,handler:D})}),s}},{key:"eventMap",get:function(){return{"(self)":{"(descendant)":{change:this.oncellchanged}}}}}]),t}();["rows","columns","widths","heights","widths_sum","heights_sum","controls"].forEach(function(e){return f.memoize(L.prototype,e,!1)}),f.register("rack-table",L),d.register("rack-table",F)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=scene,i=o.RectPath,a=o.Component,s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src",property:"src"},{type:"checkbox",label:"autoplay",name:"autoplay",property:"autoplay"}]},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i(a)),r(t,[{key:"init_scene",value:function(e,t){var n=this.model,r=n.mute,o=n.loop,i=n.autoplay,a=n.src,s=n.fov,u=n.clickAndDrag,c=n.wheelEnabled;this._dragStart={},this._lon=0,this._lat=0,this._clickAndDrag=u,this._isPlaying=!1,this._wheelEnabled=c,this._fov=s||35,this._fovMin=3,this._fovMax=100,this._time=(new Date).getTime(),this._scene=new THREE.Scene,this._camera=new THREE.PerspectiveCamera(s,e/t,.1,1e3),this._camera.setFocalLength(s),this._renderer=new THREE.WebGLRenderer,this._renderer.setSize(e,t),this._renderer.autoClear=!1,this._renderer.setClearColor(3355443,1),this._video=document.createElement("video"),this._video.setAttribute("crossorigin","anonymous"),this._video.loop=o,this._video.muted=r,this._texture=new THREE.Texture(this._video);var l=this;this._video.addEventListener("ended",function(){this._isPlaying=!1}),this._video.addEventListener("progress",function(){var e=null;l._video&&l._video.buffered&&l._video.buffered.length>0&&l._video.buffered.end&&l._video.duration?e=l._video.buffered.end(0)/l._video.duration:l._video&&void 0!==l._video.bytesTotal&&l._video.bytesTotal>0&&void 0!==l._video.bufferedBytes&&(e=l._video.bufferedBytes/l._video.bytesTotal),Math.round(100*e)}),this._video.addEventListener("canplay",function(){!0===i&&(l.play(),l._videoReady=!0)}),this._video.src=this.app.url(a),this._texture.generateMipmaps=!1,this._texture.minFilter=THREE.LinearFilter,this._texture.magFilter=THREE.LinearFilter,this._texture.format=THREE.RGBFormat,this._mesh=new THREE.Mesh(new THREE.SphereBufferGeometry(500,80,50),new THREE.MeshBasicMaterial({map:this._texture})),this._mesh.scale.x=-1,this._scene.add(this._mesh),this.animate()}},{key:"destroy_scene",value:function(){cancelAnimationFrame(this._requestAnimationId),this._requestAnimationId=void 0,this._texture.dispose(),this._scene.remove(this._mesh),this.unloadVideo(),this._renderer=void 0,this._camera=void 0,this._keyboard=void 0,this._controls=void 0,this._projector=void 0,this._load_manager=void 0,this._scene=void 0,this._video=void 0}},{key:"loadVideo",value:function(e){this._video.src=e}},{key:"unloadVideo",value:function(){this.pause(),this._video.src="",this._video.removeAttribute("src")}},{key:"play",value:function(){this._isPlaying=!0,this._video.play()}},{key:"pause",value:function(){this._isPlaying=!1,this._video.pause()}},{key:"resize",value:function(e,t){this._renderer&&(this._renderer.setSize(e,t),this._camera.aspect=e/t,this._camera.updateProjectionMatrix())}},{key:"animate",value:function(){if(this._requestAnimationId=requestAnimationFrame(this.animate.bind(this)),this._video.readyState===this._video.HAVE_ENOUGH_DATA&&void 0!==this._texture){var e=(new Date).getTime();e-this._time>=30&&(this._texture.needsUpdate=!0,this._time=e)}this.render(),this.invalidate()}},{key:"render",value:function(){this._lat=Math.max(-85,Math.min(85,this._lat||0)),this._phi=(90-this._lat)*Math.PI/180,this._theta=(this._lon||0)*Math.PI/180;var e=500*Math.sin(this._phi)*Math.cos(this._theta),t=500*Math.cos(this._phi),n=500*Math.sin(this._phi)*Math.sin(this._theta);this._camera.lookAt(new THREE.Vector3(e,t,n)),this.model.flatProjection?(this._camera.position.x=0,this._camera.position.y=0,this._camera.position.z=0):(this._camera.position.x=-e,this._camera.position.y=-t,this._camera.position.z=-n),this._renderer.clear(),this._renderer.render(this._scene,this._camera)}},{key:"createControls",value:function(){var e=this.options.muted?"fa-volume-off":"fa-volume-up",t='           <div class="controls">               <a href="#" class="playButton button fa '+(this.options.autoplay?"fa-pause":"fa-play")+'"></a>               <a href="#" class="muteButton button fa '+e+'"></a>               <a href="#" class="fullscreenButton button fa fa-expand"></a>           </div>       ';$(this.element).append(t,!0),this.options.hideControls&&$(this.element).find(".controls").hide()}},{key:"attachControlEvents",value:function(){var e=this;this.element.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.element.addEventListener("touchmove",this.onMouseMove.bind(this),!1),this.element.addEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.element.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.element.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.element.addEventListener("touchstart",this.onMouseDown.bind(this),!1),this.element.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.element.addEventListener("touchend",this.onMouseUp.bind(this),!1),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.fullscreen.bind(this)),$(window).resize(function(){e.resizeGL($(e.element).width(),$(e.element).height())}),$(this.element).find(".playButton").click(function(t){t.preventDefault(),$(this).hasClass("fa-pause")?($(this).removeClass("fa-pause").addClass("fa-play"),e.pause()):($(this).removeClass("fa-play").addClass("fa-pause"),e.play())}),$(this.element).find(".fullscreenButton").click(function(t){t.preventDefault();var n=$(e.element)[0];$(this).hasClass("fa-expand")?n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen():n.requestFullscreen?document.exitFullscreen():n.msRequestFullscreen?document.msExitFullscreen():n.mozRequestFullScreen?document.mozCancelFullScreen():n.webkitRequestFullscreen&&document.webkitExitFullscreen()}),$(this.element).find(".muteButton").click(function(t){t.preventDefault(),$(this).hasClass("fa-volume-off")?($(this).removeClass("fa-volume-off").addClass("fa-volume-up"),e._video.muted=!1):($(this).removeClass("fa-volume-up").addClass("fa-volume-off"),e._video.muted=!0)})}},{key:"_draw",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height;t.src,e.beginPath(),e.rect(n,r,o,i)}},{key:"_post_draw",value:function(e){var t=this.model,n=t.left,r=t.top,o=t.width,i=t.height;t.src?(this._scene||(this.init_scene(o,i),this.render()),e.drawImage(this._renderer.domElement,0,0,o,i,n,r,o,i)):this.drawFill(e),this.drawStroke(e)}},{key:"onchange",value:function(e,t){(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&this.resize(this.model.width,this.model.height),(e.hasOwnProperty("src")||e.hasOwnProperty("autoplay"))&&this.destroy_scene(),this.invalidate()}},{key:"ondblclick",value:function(e){this._isPlaying?this.pause():this.play(),e.stopPropagation()}},{key:"onmousedown",value:function(e){}},{key:"onmousemove",value:function(e){var t,n;!1===this._clickAndDrag&&(this._onPointerDownPointerX=e.offsetX,this._onPointerDownPointerY=-e.offsetY,this._onPointerDownLon=this._lon,this._onPointerDownLat=this._lat,t=e.offsetX-this._renderer.getContext().canvas.offsetLeft,n=e.offsetY-this._renderer.getContext().canvas.offsetTop,this._lon=t/this._renderer.getContext().canvas.width*430-225,this._lat=n/this._renderer.getContext().canvas.height*-180+90)}},{key:"onwheel",value:function(e){!1!==this._wheelEnabled&&(this._fov-=.01*e.deltaY,this._fov<this._fovMin?this._fov=this._fovMin:this._fov>this._fovMax&&(this._fov=this._fovMax),this._camera.setFocalLength(this._fov),this._camera.updateProjectionMatrix(),e.stopPropagation())}},{key:"ondragstart",value:function(e){this._dragStart.x=e.offsetX,this._dragStart.y=e.offsetY}},{key:"ondragmove",value:function(e){var t,n;!1!==this._isPlaying&&(!1!==this._clickAndDrag&&(this._onPointerDownPointerX=e.offsetX,this._onPointerDownPointerY=-e.offsetY,this._onPointerDownLon=this._lon,this._onPointerDownLat=this._lat,t=e.offsetX-this._dragStart.x,n=e.offsetY-this._dragStart.y,this._dragStart.x=e.offsetX,this._dragStart.y=e.offsetY,this._lon+=t,this._lat-=n),e.stopPropagation())}},{key:"ondragend",value:function(e){}},{key:"ontouchstart",value:function(e){}},{key:"ontouchmove",value:function(e){}},{key:"ontouchend",value:function(e){}},{key:"onkeydown",value:function(e){}},{key:"nature",get:function(){return s}}]),t}();t.default=u,a.register("video-player-360",u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n,r,o,i,a;this.object=e,this.component=t,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=this.component.model.autoRotate||!1,this.autoRotateSpeed=this.component.model.rotationSpeed||2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.cameraChanged=!1,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.update(),c=u.NONE},this.update=(n=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),o=r.clone().inverse(),i=new THREE.Vector3,a=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(r),h.setFromVector3(n),s.autoRotate&&c===u.NONE&&j(function(){if(!T)return T=performance.now(),R=h.theta,0;var e=(performance.now()-T)/(6e4/s.autoRotateSpeed);return 2*Math.PI*e+h.theta-R}()),h.theta+=f.theta,h.phi+=f.phi,h.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,h.theta)),h.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(s.minDistance,Math.min(s.maxDistance,h.radius)),s.target.add(p),n.setFromSpherical(h),n.applyQuaternion(o),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(f.theta*=1-s.dampingFactor,f.phi*=1-s.dampingFactor):f.set(0,0,0),d=1,p.set(0,0,0),y||i.distanceToSquared(s.object.position)>l||8*(1-a.dot(s.object.quaternion))>l?(i.copy(s.object.position),a.copy(s.object.quaternion),s.component.invalidate(),s.cameraChanged=!1,y=!1,!0):(s.component.invalidate(),!1)}),this.dispose=function(){},this.onMouseDown=function(e){},this.onMouseMove=function(e){},this.onMouseUp=function(e){},this.onDragStart=function(e){if(!1!==this.enabled&&!1!==this.enableRotate)switch(s.component.stop(),this.autoRotate=!1,c=!0===e.altKey?u.PAN:u.ROTATE){case u.ROTATE:this.enableRotate&&function(e){m.set(e.offsetX,e.offsetY)}(e);break;case u.DOLLY:this.enableZoom&&function(e){E.set(e.offsetX,e.offsetY)}(e);break;case u.PAN:this.enablePan&&function(e){g.set(e.offsetX,e.offsetY)}(e)}},this.onDragMove=function(e){if(this.enabled)switch(c=!0===e.altKey?u.PAN:u.ROTATE){case u.ROTATE:this.enableRotate&&function(e){b.set(e.offsetX,e.offsetY),v.subVectors(b,m);var t=s.component;j(2*Math.PI*v.x/t.get("width")*s.rotateSpeed),P(2*Math.PI*v.y/t.get("height")*s.rotateSpeed),m.copy(b),s.update()}(e);break;case u.DOLLY:this.enableZoom&&function(e){k.set(e.offsetX,e.offsetY),O.subVectors(k,E),O.y>0?function(e){s.object.isPerspectiveCamera?d/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}(x()):O.y<0&&function(e){s.object.isPerspectiveCamera?d*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}(x()),E.copy(k),s.update()}(e);break;case u.PAN:this.enablePan&&function(e){_.set(e.offsetX,e.offsetY),w.subVectors(_,g),C(w.x,w.y),g.copy(_),s.update()}(e)}},this.onDragEnd=function(e){!1!==this.enabled&&!1!==this.enableRotate&&(c=u.NONE,T=null,this.autoRotate=this.component.model.autoRotate||!1,s.component.threed_animate())},this.onKeyDown=function(e){!1!==this.enabled&&!1!==this.enableKeys&&!1!==this.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:C(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:C(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:C(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:C(-s.keyPanSpeed,0),s.update()}}(e)},this.onTouchStart=function(e){if(!1!==this.enabled)switch(e.touches.length){case 1:if(!1===this.enableRotate)return;!function(e){var t=e.touches[0].offsetX||e.touches[0].pageX,n=e.touches[0].offsetY||e.touches[0].pageY;m.set(t,n)}(e),c=u.TOUCH_ROTATE;break;case 2:if(this.lastScale=e.scale,!1===this.enablePan)return;!function(e){var t=e.touches[0].offsetX||e.touches[0].pageX,n=e.touches[0].offsetY||e.touches[0].pageY;g.set(t,n)}(e),c=u.TOUCH_PAN;break;default:c=u.NONE}},this.onTouchMove=function(e){if(!1!==this.enabled)switch(e.touches.length){case 1:if(!1===this.enableRotate)return;if(c!==u.TOUCH_ROTATE)return;!function(e){var t=e.touches[0].offsetX||e.touches[0].pageX,n=e.touches[0].offsetY||e.touches[0].pageY;b.set(t,n),v.subVectors(b,m);var r=s.component===document?s.component.body:s.component;j(2*Math.PI*v.x/r.model.width*s.rotateSpeed),P(2*Math.PI*v.y/r.model.height*s.rotateSpeed),m.copy(b),s.update()}(e);break;case 2:if(Math.abs(this.lastScale-e.scale)>.05)return void console.log(e.scale);if(!1===this.enablePan)return;if(c!==u.TOUCH_PAN)return;!function(e){var t=e.touches[0].offsetX||e.touches[0].pageX,n=e.touches[0].offsetY||e.touches[0].pageY;_.set(t,n),w.subVectors(_,g),C(w.x,w.y),g.copy(_),s.update()}(e);break;default:c=u.NONE}},this.onTouchEnd=function(e){!1!==this.enabled&&(this.lastScale=1,c=u.NONE)},this.doAutoRotate=function(e){T=null,this.cameraChanged=!0,this.autoRotate=e,this.update()};var s=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},c=u.NONE,l=1e-6,h=new THREE.Spherical,f=new THREE.Spherical,d=1,p=new THREE.Vector3,y=!1,m=new THREE.Vector2,b=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector2,_=new THREE.Vector2,w=new THREE.Vector2,E=new THREE.Vector2,k=new THREE.Vector2,O=new THREE.Vector2,T=null,R=0;function x(){return Math.pow(.95,s.zoomSpeed)}function j(e){f.theta-=e}function P(e){f.phi-=e}var M,S=(M=new THREE.Vector3,function(e,t){M.setFromMatrixColumn(t,0),M.multiplyScalar(-e),p.add(M)}),H=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),p.add(e)}}(),C=function(){var e=new THREE.Vector3;return function(t,n){var r=s.component===document?s.component.body:s.component;if(s.object.isPerspectiveCamera){var o=s.object.position;e.copy(o).sub(s.target);var i=e.length();i*=Math.tan(s.object.fov/2*Math.PI/180),S(2*t*i/r.model.height,s.object.matrix),H(2*n*i/r.model.height,s.object.matrix)}else s.object.isOrthographicCamera?(S(t*(s.object.right-s.object.left)/s.object.zoom/r.model.width,s.object.matrix),H(n*(s.object.top-s.object.bottom)/s.object.zoom/r.model.height,s.object.matrix)):(console.warn("WARNING: ThreeControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();this.update()};(r.prototype={}).constructor=r,Object.defineProperties(r.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={reflow:function(e,t){},capturables:function(e){return e.get("threed")?[]:e.components},drawables:function(e){return e.get("threed")?[]:e.components},isStuck:function(e){return!1}};scene.Layout.register("three",r),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=(a(n(29)),a(n(28)));function a(e){return e&&e.__esModule?e:{default:e}}THREE.Cache.enabled=!0;var s=scene,u=s.Component,c=s.Container,l=s.Layout,h=s.Layer,f={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"fov",name:"fov",property:"fov"},{type:"number",label:"near",name:"near",property:"near"},{type:"number",label:"far",name:"far",property:"far"},{type:"number",label:"zoom",name:"zoom",property:"zoom"},{type:"select",label:"precision",name:"precision",property:{options:[{display:"High",value:"highp"},{display:"Medium",value:"mediump"},{display:"Low",value:"lowp"}]}},{type:"checkbox",label:"anti-alias",name:"antialias",property:"antialias"},{type:"checkbox",label:"auto-rotate",name:"autoRotate",property:"autoRotate"},{type:"checkbox",label:"show-axis",name:"showAxis",property:"showAxis"},{type:"checkbox",label:"3dmode",name:"threed",property:"threed"},{type:"checkbox",label:"debug",name:"debug",property:"threed"},{type:"string",label:"location-field",name:"locationField"},{type:"string",label:"popup-scene",name:"popupScene"},{type:"string",label:"legend-target",name:"legendTarget"},{type:"number",label:"rotation-speed",name:"rotationSpeed"},{type:"checkbox",label:"hide-empty-stock",name:"hideEmptyStock"}]},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c),r(t,[{key:"containable",value:function(e){return e.is3dish()}},{key:"putObject",value:function(e,t){this._objects||(this._objects={}),this._objects[e]=t}},{key:"getObject",value:function(e){return this._objects||(this._objects={}),this._objects[e]}},{key:"createFloor",value:function(e,t,n){var r=this.model.fillStyle,o=this;if("pattern"==r.type&&r.image)var i=this._textureLoader.load(this.app.url(r.image),function(e){e.minFilter=THREE.LinearFilter,o.render_threed()}),a=[a=new THREE.MeshLambertMaterial({color:e}),a=new THREE.MeshLambertMaterial({color:e}),a=new THREE.MeshLambertMaterial({color:e}),a=new THREE.MeshLambertMaterial({color:e}),new THREE.MeshLambertMaterial({map:i}),a=new THREE.MeshLambertMaterial({color:e})];else a=new THREE.MeshLambertMaterial({color:e});var s=new THREE.BoxBufferGeometry(1,1,1),u=new THREE.Mesh(s,a);u.scale.set(t,n,5),u.rotation.x=-Math.PI/2,u.position.y=-2,u.name="floor",this._scene3d.add(u)}},{key:"createObjects",value:function(e,t){var n=this;e.forEach(function(e){var r=scene.Component3d.register(e.model.type);if(r){var o=new r(e.hierarchy,t,n,e);o&&(o.name=e.model.id,n._scene3d.add(o),n.putObject(e.model.id,o))}else console.warn("Class not found : 3d class is not exist")})}},{key:"destroy_scene3d",value:function(){if(this.stop(),window.removeEventListener("focus",this._onFocus),this._renderer&&this._renderer.clear(),delete this._renderer,delete this._camera,delete this._2dCamera,delete this._keyboard,delete this._controls,delete this._projector,delete this._load_manager,delete this._objects,this._scene3d){var e=this._scene3d.children.slice();for(var t in e){var n=e[t];n.dispose&&n.dispose(),n.geometry&&n.geometry.dispose&&n.geometry.dispose(),n.material&&n.material.dispose&&n.material.dispose(),n.texture&&n.texture.dispose&&n.texture.dispose(),this._scene3d.remove(n)}}delete this._scene3d}},{key:"init_scene3d",value:function(){this.trigger("visualizer-initialized",this),this.root.on("redraw",this.onredraw,this),this._scene3d&&this.destroy_scene3d(),function e(){e.done||(THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),e.done=!0)}(),this._textureLoader=new THREE.TextureLoader(THREE.DefaultLoadingManager),this._textureLoader.withCredential=!0,this._textureLoader.crossOrigin="use-credentials",this._exporter=new THREE.OBJExporter;var e=this.bounds,t=e.width,n=e.height,r=this.model,o=r.fov,a=void 0===o?45:o,s=r.near,u=void 0===s?.1:s,c=r.far,l=void 0===c?2e4:c,h=r.fillStyle,f=void 0===h?"#424b57":h,d=r.light,p=void 0===d?16777215:d,y=r.antialias,m=void 0===y||y,b=r.precision,v=void 0===b?"highp":b,g=(r.legendTarget,this.components||[]);this._scene3d=new THREE.Scene;var _=t/n;if(this._camera=new THREE.PerspectiveCamera(a,_,u,l),this._scene3d.add(this._camera),this._camera.position.set(.8*n,Math.floor(Math.min(t,n)),.8*t),this._camera.lookAt(this._scene3d.position),this._camera.zoom=.01*this.model.zoom,this.model.showAxis){var w=new THREE.AxesHelper(t);this._scene3d.add(w)}try{this._renderer=new THREE.WebGLRenderer({precision:v,alpha:!0,antialias:m})}catch(e){this._noSupportWebgl=!0}if(!this._noSupportWebgl){this._renderer.autoClear=!0,this._renderer.setClearColor(16777215,0),this._renderer.setSize(Math.min(t,window.innerWidth),Math.min(n,window.innerHeight)),this._controls=new i.default(this._camera,this);var E=new THREE.HemisphereLight(p,0,1);E.position.set(-this._camera.position.x,this._camera.position.y,-this._camera.position.z),this._camera.add(E),this._raycaster=new THREE.Raycaster,this._mouse=new THREE.Vector2,this._tick=0,this._clock=new THREE.Clock(!0),this.mixers=new Array,this.createFloor(f,t,n),this.createObjects(g,{width:t,height:n}),this._onFocus=function(){this.render_threed()}.bind(this),window.addEventListener("focus",this._onFocus)}}},{key:"threed_animate",value:function(){this._controls&&(this._controls.update(),this.render_threed())}},{key:"stop",value:function(){}},{key:"render_threed",value:function(){this._renderer&&this._renderer.render(this._scene3d,this._camera)}},{key:"render",value:function(e){this.app.isViewMode&&(this.model.threed||(this.model.threed=!0)),this.model.threed&&!this._noSupportWebgl||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}},{key:"postrender",value:function(e){var n=this.model,r=n.left,i=n.top,a=n.debug,s=n.threed,u=this.bounds,c=u.width,l=u.height;if(c=Math.floor(c),l=Math.floor(l),s){if(this._scene3d||(this.init_scene3d(),this.render_threed()),this._noSupportWebgl)return void this._showWebglNoSupportText(e);if(this._dataChanged&&this._onDataChanged(),!1===this._loadComplete)return;var h=this._renderer.getSize(),f=h.width,d=h.height;e.drawImage(this._renderer.domElement,0,0,f,d,r,i,c,l),a&&(e.font="100px Arial",e.textAlign="center",e.fillStyle="black",e.globalAlpha=.5,e.fillText(scene.FPS(),100,100),this.invalidate())}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e)}},{key:"dispose",value:function(){this._legendTarget&&this._legendTarget.off("change",this.onLegendTargetChanged,this),delete this._legendTarget,this.root.off("redraw",this.onredraw,this),this.destroy_scene3d(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"getObjectByRaycast",value:function(){var e,t=this.getObjectsByRaycast();return t.length>0&&(e=t[0].object),e}},{key:"getObjectsByRaycast",value:function(){var e=this._mouse;if(this._camera)return this._raycaster.setFromCamera(e,this._camera),this._raycaster.intersectObjects(this._scene3d.children,!0)}},{key:"exportModel",value:function(){var e=this._exporter.parse(this._scene3d);new Blob([e],{type:"text/plain;charset=utf-8"}),console.log(e)}},{key:"_showWebglNoSupportText",value:function(e){e.save();var t=this.model,n=t.width,r=t.height;e.font=n/20+"px Arial",e.textAlign="center",e.fillText("WebGL no support",n/2-n/40,r/2),e.restore()}},{key:"resetMaterials",value:function(){this._stock_materials&&(this._stock_materials.forEach(function(e){e.dispose&&e.dispose()}),delete this._stock_materials)}},{key:"_onDataChanged",value:function(){var e=this.getState("locationField")||"location";if(this._data){if(this._data instanceof Array)return this._data=this._data.reduce(function(t,n,r,o){var i=JSON.parse(JSON.stringify(n));if(t[n[e]]){if(!t[n[e]].items){var a=JSON.parse(JSON.stringify(t[n[e]]));t[n[e]]={items:[]},t[n[e]].items.push(a)}}else t[n[e]]={items:[]};return t[n[e]].items.push(i),t},{}),this._onDataChanged();for(var t in this._data){var n=t;if(this._data.hasOwnProperty(n)){var r=this._data[n],o=this.getObject(n);o&&(o.userData=r,o.onUserDataChanged())}}}this._dataChanged=!1,this.invalidate()}},{key:"onLegendTargetChanged",value:function(e,t){e.hasOwnProperty("status")&&t.hasOwnProperty("status")&&this.resetMaterials()}},{key:"onchange",value:function(e,t){(t.hasOwnProperty("legendTarget")||e.hasOwnProperty("legendTarget"))&&(this._legendTarget&&this._legendTarget.off("change",this.onLegendTargetChanged,this),delete this._legendTarget,this.resetMaterials(),this._onDataChanged()),(e.hasOwnProperty("width")||e.hasOwnProperty("height")||e.hasOwnProperty("threed"))&&this.destroy_scene3d(),e.hasOwnProperty("autoRotate")&&this._controls&&this._controls.doAutoRotate(e.autoRotate),(e.hasOwnProperty("fov")||e.hasOwnProperty("near")||e.hasOwnProperty("far")||e.hasOwnProperty("zoom"))&&this._camera&&(this._camera.near=this.model.near,this._camera.far=this.model.far,this._camera.zoom=.01*this.model.zoom,this._camera.fov=this.model.fov,this._camera.updateProjectionMatrix(),this._controls.cameraChanged=!0),e.hasOwnProperty("data")&&this._data!==e.data&&(this._data=e.data,this._dataChanged=!0),this.invalidate()}},{key:"onmousedown",value:function(e){this._controls&&this._controls.onMouseDown(e)}},{key:"onmouseup",value:function(e){if(this._controls){this._lastFocused&&(this._lastFocused._focused=!1);var t=h.register("model-layer").Popup,n=this.model.popupScene,r=this.transcoordC2S(e.offsetX,e.offsetY);this._mouse.x=(r.x-this.model.left)/this.model.width*2-1,this._mouse.y=-(r.y-this.model.top)/this.model.height*2+1;var o=this.getObjectByRaycast();o&&o.onmouseup?(n&&o.onmouseup(e,this,t.show.bind(this,this,n)),o._focused=!0,o._focusedAt=performance.now(),this._lastFocused=o):t.hide(this.root),this.invalidate(),e.stopPropagation()}}},{key:"onmousemove",value:function(e){if(this._controls){var t=this.transcoordC2S(e.offsetX,e.offsetY);this._mouse.x=(t.x-this.model.left)/this.model.width*2-1,this._mouse.y=-(t.y-this.model.top)/this.model.height*2+1,this._controls.onMouseMove(e),e.stopPropagation()}}},{key:"onmouseleave",value:function(e){if(this._scene2d){var t=this._scene2d.getObjectByName("tooltip");t&&this._scene2d.remove(t)}}},{key:"onwheel",value:function(e){this._controls&&(this.handleMouseWheel(e),e.stopPropagation())}},{key:"ondblclick",value:function(e){this._controls&&(this._controls.reset(),e.stopPropagation())}},{key:"ondragstart",value:function(e){if(this._controls){var t=this.transcoordC2S(e.offsetX,e.offsetY);this._mouse.x=(t.x-this.model.left)/this.model.width*2-1,this._mouse.y=-(t.y-this.model.top)/this.model.height*2+1,this._controls.onDragStart(e),e.stopPropagation()}}},{key:"ondragmove",value:function(e){this._controls&&(this._controls.cameraChanged=!0,this._controls.onDragMove(e),e.stopPropagation())}},{key:"ondragend",value:function(e){this._controls&&(this._controls.cameraChanged=!0,this._controls.onDragEnd(e),e.stopPropagation())}},{key:"ontouchstart",value:function(e){this._controls&&(this._controls.onTouchStart(e),e.stopPropagation())}},{key:"onpan",value:function(e){this._controls&&(this._controls.cameraChanged=!0,this._controls.onTouchMove(e),e.stopPropagation())}},{key:"ontouchend",value:function(e){this._controls&&(this._controls.onTouchEnd(e),this.onmouseup(e),e.stopPropagation())}},{key:"onkeydown",value:function(e){this._controls&&(this._controls.onKeyDown(e),e.stopPropagation())}},{key:"onpinch",value:function(e){if(this._controls){var t=this.model.zoom;(t*=e.scale)<100&&(t=100),this.set("zoom",t),e.stopPropagation()}}},{key:"ondoubletap",value:function(){this._controls.reset()}},{key:"handleMouseWheel",value:function(e){var t=this.model.zoom;(t+=.1*-e.deltaY)<100&&(t=100),this.set("zoom",t)}},{key:"onredraw",value:function(){this.threed_animate()}},{key:"legendTarget",get:function(){var e=this.model.legendTarget;return!this._legendTarget&&e&&(this._legendTarget=this.root.findById(e),this._legendTarget&&this._legendTarget.on("change",this.onLegendTargetChanged,this)),this._legendTarget}},{key:"scene3d",get:function(){return this._scene3d||this.init_scene3d(),this._scene3d}},{key:"layout",get:function(){return l.get("three")}},{key:"nature",get:function(){return f}}]),t}();t.default=d,u.register("visualizer",d)},function(e,t,n){"use strict";THREE&&THREE.Object3D&&(THREE.Object3D.prototype.onUserDataChanged=function(){if(this.userData){if(this.userData.hasOwnProperty("position")){if(!this._visualizer)return;this._setPosition(this._visualizer.transcoord2dTo3d(this.userData.position))}this.userData.hasOwnProperty("euler")&&this._setEuler({yaw:this.userData.euler.yaw,pitch:this.userData.euler.pitch,roll:this.userData.euler.roll}),this.userData.hasOwnProperty("quaternion")&&this._setQuaternion({x:this.userData.quaternion.qx,y:this.userData.quaternion.qy,z:this.userData.quaternion.qz,w:this.userData.quaternion.qw})}},THREE.Object3D.prototype._setPosition=function(e){var t=e.x,n=e.y,r=this._visualizer.mixers.indexOf(this._mixer);r>=0&&this._visualizer.mixers.splice(r,1),this._mixer=new THREE.AnimationMixer(this),this._visualizer.mixers.push(this._mixer);var o=new THREE.VectorKeyframeTrack(".position",[0,1],[this.position.x,this.position.y,this.position.z,t,this.position.y,n]),i=new THREE.AnimationClip("Move",2,[o]),a=this._mixer.clipAction(i);a.clampWhenFinished=!0,a.loop=THREE.LoopOnce,a.play()},THREE.Object3D.prototype._setQuaternion=function(e){var t=e.x,n=e.y,r=e.z,o=e.w,i=new THREE.Quaternion;i.set(t,n,r,o),this.setRotationFromQuaternion(i),this.rotateOnAxis(new THREE.Vector3(1,0,0),-Math.PI),this.rotateOnAxis(new THREE.Vector3(0,1,0),Math.PI),this.rotateOnAxis(new THREE.Vector3(0,0,1),-Math.PI/2)},THREE.Object3D.prototype._setEuler=function(e){var t=e.yaw,n=e.pitch,r=e.roll,o=new THREE.Euler;o.set(t,n,r,"ZYX"),this.setRotationFromEuler(o)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x(r).default}});var o=n(1);Object.defineProperty(t,"Component3d",{enumerable:!0,get:function(){return x(o).default}});var i=n(30);Object.defineProperty(t,"Visualizer",{enumerable:!0,get:function(){return x(i).default}});var a=n(27);Object.defineProperty(t,"VideoPlayer360",{enumerable:!0,get:function(){return x(a).default}});var s=n(26);Object.defineProperty(t,"RackTable",{enumerable:!0,get:function(){return x(s).default}});var u=n(6);Object.defineProperty(t,"RackTableCell",{enumerable:!0,get:function(){return x(u).default}});var c=n(24);Object.defineProperty(t,"Door",{enumerable:!0,get:function(){return x(c).default}});var l=n(23);Object.defineProperty(t,"ForkLift",{enumerable:!0,get:function(){return x(l).default}});var h=n(22);Object.defineProperty(t,"HumiditySensor",{enumerable:!0,get:function(){return x(h).default}});var f=n(21);Object.defineProperty(t,"Person",{enumerable:!0,get:function(){return x(f).default}});var d=n(20);Object.defineProperty(t,"RectExtrude",{enumerable:!0,get:function(){return x(d).default}});var p=n(5);Object.defineProperty(t,"Rack",{enumerable:!0,get:function(){return x(p).default}});var y=n(4);Object.defineProperty(t,"Stock",{enumerable:!0,get:function(){return x(y).default}});var m=n(17);Object.defineProperty(t,"Wall",{enumerable:!0,get:function(){return x(m).default}});var b=n(16);Object.defineProperty(t,"Cube",{enumerable:!0,get:function(){return x(b).default}});var v=n(15);Object.defineProperty(t,"Cylinder",{enumerable:!0,get:function(){return x(v).default}});var g=n(14);Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return x(g).default}});var _=n(13);Object.defineProperty(t,"Cone",{enumerable:!0,get:function(){return x(_).default}});var w=n(12);Object.defineProperty(t,"Banner",{enumerable:!0,get:function(){return x(w).default}});var E=n(11);Object.defineProperty(t,"Desk",{enumerable:!0,get:function(){return x(E).default}});var k=n(10);Object.defineProperty(t,"Beacon3D",{enumerable:!0,get:function(){return x(k).default}});var O=n(9);Object.defineProperty(t,"Pallet",{enumerable:!0,get:function(){return x(O).default}});var T=n(8);Object.defineProperty(t,"PolygonExtrude",{enumerable:!0,get:function(){return x(T).default}});var R=n(7);function x(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"EllipseExtrude",{enumerable:!0,get:function(){return x(R).default}})}]);